# Phase 2 äºŒé˜¶æ®µç›®æ ‡ä¸ç”¨æˆ·æ•…äº‹ï¼ˆv2ï¼‰

## ä¸€ã€Phase 1 å›é¡¾

### 1.1 é˜¶æ®µæˆæœ

Phase 1 èšç„¦"ç»Ÿä¸€å·¥ä½œé¢"å’Œ"å†³ç­–èµ„äº§åŒ–"çš„åŸºç¡€èƒ½åŠ›éªŒè¯ï¼Œåœ¨**å•äººå•æœºå¤šè§’è‰²åä½œ**åœºæ™¯ä¸‹å®Œæˆäº†ä»¥ä¸‹å·¥ä½œï¼š

**ç ”å‘æˆæœ**ï¼š
- âœ… Dashboard é¡µé¢ï¼š.elf æ–‡ä»¶çš„åˆ›å»ºã€å¯¼å…¥ã€é‡å‘½åã€åˆ é™¤å’Œå±•ç¤º
- âœ… Editor é¡µé¢æ ¸å¿ƒæ¨¡å—ï¼š
  - Directory æ¨¡å—ï¼šå†…éƒ¨/å¤–éƒ¨ç›®å½•ç®¡ç†ã€æ–‡ä»¶å¯¼å…¥å¯¼å‡º
  - Markdown ç¼–è¾‘ï¼šMyst è¯­æ³•æ”¯æŒã€æ–‡å­—ä¸ä»£ç å—åŒºåˆ†
  - åä½œè€…ä¸æƒé™ï¼šCBAC æƒé™æ¨¡å‹ã€åä½œè€…å¢åˆ å’Œæƒé™ç®¡ç†
  - Event è®°å½•ä¸å›æº¯ï¼šåŸºäºå‘é‡æ—¶é’Ÿçš„äº‹ä»¶æ’åºã€Timeline å¯è§†åŒ–ã€çŠ¶æ€å›æº¯
- âœ… æ ¸å¿ƒæ¶æ„ï¼šEvent Sourcingã€Block-based data structureã€Capability-based Architecture
- âœ… 25 ä¸ª Capabilityï¼Œ84% API åŒ–å®Œæˆ

**äº§å“æˆæœ**ï¼š
- âœ… ç«å“åˆ†æï¼šå¯¹æ¯”å¤§å‚å·¥ä½œæµã€Google å·¥ä½œæµã€Vibe Coding å·¥ä½œæµ
- âœ… ç”¨æˆ·å®éªŒï¼šè®°å½•è¡Œä¸ºçš„ Effort vs Valueã€ä¸åŒè®°å½•å½¢å¼çš„ Benefit å¯¹æ¯”

**æ ¸å¿ƒå‘ç°**ï¼š
- å•çº¯çš„ Log æ˜¯æ— æ•ˆçš„ï¼šä¿¡æ¯å¯†åº¦å¤ªä½ï¼Œå¢åŠ é˜…è¯»è´Ÿæ‹…
- Summary æ˜¯æ–¹å‘ï¼šä½†å¿…é¡»å¯è¿½æº¯ï¼Œä¸èƒ½æ˜¯é»‘ç›’
- **å†³ç­–èµ„äº§åŒ–çš„ä»·å€¼ä¸åœ¨äºç»™äººè¯»ï¼Œè€Œåœ¨äºè®© AI å­¦**

---

## äºŒã€Phase 1 çš„ Gap ä¸ Phase 2 æ–¹å‘æ”¶æŸ

### 2.1 Phase 1 çš„æ ¸å¿ƒ Gap

ä»"è®©å†³ç­–å¯å­¦ä¹ "çš„äº§å“å‘½é¢˜å‡ºå‘ï¼ŒPhase 1 å®Œæˆäº†**æŠŠå„é˜¶æ®µå†³ç­–è®°å½•ä¸‹æ¥**çš„åŸºç¡€éªŒè¯ï¼Œä½†è·ç¦»**è®© AI å·¥å…·æ— ç¼æ¥å…¥**ä»æœ‰æ˜¾è‘—å·®è·ï¼š

| Gap | æè¿° | ä¸ç†æƒ³çŠ¶æ€çš„å·®è· |
| :--- | :--- | :--- |
| **AI æœªæ¥å…¥** | å½“å‰ç³»ç»Ÿåªæœ‰"äººç±»è§’è‰²"ï¼Œæ²¡æœ‰ AI Agent å‚ä¸åä½œ | æ— æ³•éªŒè¯ **AI åŸç”Ÿç¼–è¾‘å™¨**çš„æ ¸å¿ƒå®šä½ |
| **å·¥å…·å‰²è£‚** | å¦‚æœå†…ç½® Agentï¼Œç”¨æˆ·éœ€è¦æ”¾å¼ƒæˆç†Ÿçš„ Claude Code/Cursor | ç”¨æˆ·è¢«è¿«é€‰æ‹©ï¼šç”¨å¼±å·¥å…·ä½†æœ‰è®°å½• vs ç”¨å¼ºå·¥å…·ä½†æ— è®°å½• |
| **é›†æˆç¼ºå¤±** | AI å·¥å…·çš„æ“ä½œä¸ä¼šè‡ªåŠ¨åŒæ­¥åˆ° Elfiee çš„ Event Store | å†³ç­–è®°å½•ä¸å®Œæ•´ï¼Œæ— æ³•è¿½æº¯ AI çš„æ€è€ƒè¿‡ç¨‹ |
| **ç‰ˆæœ¬æ§åˆ¶æ–­å±‚** | Elfiee å†…éƒ¨ Event ä¸ Git å¤–éƒ¨ Commit ç›¸äº’ç‹¬ç«‹ | æ— æ³•å»ºç«‹"å†…éƒ¨å†³ç­– â†’ å¤–éƒ¨å˜æ›´"çš„æ˜ å°„ |

### 2.2 Phase 1 å®éªŒçš„å…³é”®æ´å¯Ÿ

**äº§å“å±‚é¢**ï¼š
- âŒ **ä¸æˆç«‹çš„å‡è®¾**: "ç”¨æˆ·æ„¿æ„æ”¾å¼ƒæˆç†Ÿå·¥å…·æ¥ä½¿ç”¨ Elfiee å†…ç½® Agent"
- âœ… **æˆç«‹çš„å‡è®¾**: "ç”¨æˆ·æ„¿æ„è®© AI å·¥å…·é€šè¿‡ API æ“ä½œ Elfieeï¼Œåªè¦ä¸å½±å“åŸæœ‰å·¥ä½œæµ"
- ğŸ¯ **æ ¸å¿ƒè½¬å‘**: **Elfiee ä¸æ˜¯ AI å·¥å…·çš„æ›¿ä»£å“ï¼Œè€Œæ˜¯ AI å·¥å…·çš„"å†³ç­–è®°å¿†å±‚"**

**ç ”å‘å±‚é¢**ï¼š
- Event Sourcing æ¶æ„æˆç†Ÿï¼šå¯ä½œä¸º AI æ“ä½œçš„æŒä¹…åŒ–å±‚
- Capability ç³»ç»Ÿå®Œå–„ï¼šå¯æš´éœ²ä¸º Claude Skills
- Vector Clock æœºåˆ¶ï¼šå¯ç”¨äº AI ä¼šè¯ä¸ä»£ç å˜æ›´çš„å…³è”
- Directory æ’ä»¶æˆç†Ÿï¼šæ”¯æŒæ–‡ä»¶å¯¼å…¥å¯¼å‡ºï¼Œå¯ä½œä¸º AI å·¥å…·çš„æ–‡ä»¶ç½‘å…³

### 2.3 Phase 2 æ–¹å‘æ”¶æŸ

åŸºäºä¸Šè¿° Gap å’Œæ´å¯Ÿï¼ŒPhase 2 èšç„¦ä»¥ä¸‹ä¸‰å¤§æ–¹å‘ï¼š

| æ–¹å‘ | æè¿° | å¯¹åº”æ¨¡å— |
| :--- | :--- | :--- |
| **Skills é›†æˆ** | å°† Elfiee Capability æš´éœ²ä¸º Claude Code Skills | Skills Generator |
| **ä¼šè¯åŒæ­¥** | è‡ªåŠ¨åŒæ­¥ Claude/Cursor ä¼šè¯åˆ° Elfiee Event Store | Session Sync |
| **å†…å¤–æ˜ å°„** | å»ºç«‹ Elfiee å†…éƒ¨ Event ä¸ Git Commit çš„åŒå‘æ˜ å°„ | Git Integration |

### 2.4 Elfiee åœ¨ Phase 2 çš„æ ¸å¿ƒå®šä½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Native Editor                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Claude Code  â”‚  â”‚   Cursor     â”‚  â”‚    Codex     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                 â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                      â–¼                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚   Elfiee CLI + Skills  â”‚ â† æœ¬åœ° CLI è°ƒç”¨         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                      â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Elfiee Event Store                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Blocks  â”‚  â”‚ Events  â”‚  â”‚Relationsâ”‚  â”‚ Grants  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚    Git Integration     â”‚ â† å†…å¤–æ˜ å°„              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
1. **ä¸æ›¿ä»£ï¼Œè€Œæ˜¯å¢å¼º**ï¼šç”¨æˆ·ç»§ç»­ä½¿ç”¨ Claude Code/Cursorï¼ŒElfiee åœ¨åå°è®°å½•
2. **æƒé™ç½‘å…³**ï¼šAI åªèƒ½é€šè¿‡ Elfiee CLI æ“ä½œæ–‡ä»¶ï¼ŒCBAC æ§åˆ¶æƒé™è¾¹ç•Œ
3. **å†³ç­–è¿½æº¯**ï¼šAI ä¼šè¯ + ä»£ç å˜æ›´ + æµ‹è¯•ç»“æœï¼Œå®Œæ•´å› æœé“¾

---

## ä¸‰ã€Phase 2 é˜¶æ®µç›®æ ‡

### 3.1 å¤§ç›®æ ‡

**è®© Elfiee æˆä¸º AI å¼€å‘å·¥å…·çš„"å†³ç­–è®°å¿†å±‚"ï¼Œå®ç° AI ä¼šè¯ â†’ Event è®°å½• â†’ Git Commit çš„å®Œæ•´æ˜ å°„ï¼Œå®Œæ•´å®ç°dogfoodingè‡ªä¸¾å¼€å‘**

å…·ä½“éœ€è¦éªŒè¯ï¼š
1. âœ… Claude Code èƒ½é€šè¿‡ Skills è°ƒç”¨ Elfiee CLIï¼ˆcore.create, markdown.write ç­‰ï¼‰
2. âœ… AI ä¼šè¯è®°å½•èƒ½è‡ªåŠ¨åŒæ­¥åˆ° Elfieeï¼Œå¹¶ä¸ä»»åŠ¡æ–‡æ¡£ã€ä»£ç å˜æ›´å»ºç«‹å…³è”
3. âœ… Elfiee å†…éƒ¨ Task èƒ½é©±åŠ¨å¤–éƒ¨ Git åˆ†æ”¯å’Œ Commit

### 3.2 å…³é”®å‡è®¾éªŒè¯

| å‡è®¾ | éªŒè¯æ–¹å¼ | æˆåŠŸæ ‡å‡† |
| :--- | :--- | :--- |
| **Skills å¯è¡Œæ€§** | Claude Code é€šè¿‡ SKILLS.md è°ƒç”¨ Elfiee CLI | æˆåŠŸæ‰§è¡Œ `core.create` ç­‰å‘½ä»¤ |
| **ä¼šè¯åŒæ­¥æœ‰æ•ˆ** | AI ä¼šè¯è‡ªåŠ¨æ˜ å°„ä¸º Elfiee Events | ä¼šè¯-ä»£ç å…³è”å‡†ç¡®ç‡ > 80% |
| **å†…å¤–æ˜ å°„æ¸…æ™°** | Task â†’ Branch, Taskå†…å®¹ â†’ Commit Message | ç”¨æˆ·æ— éœ€æ‰‹åŠ¨ç»´æŠ¤æ˜ å°„ |

### 3.3 æˆåŠŸæ ‡å‡†ä¸äº§å‡ºç‰©

#### 3.3.1 ç ”å‘ç›®æ ‡

**åŠŸèƒ½å®Œæˆç‡**ï¼š
- [ ] **æ ¸å¿ƒåŠŸèƒ½**ï¼šF1-F10 å…¨éƒ¨å®Œæˆï¼ˆ7 ä¸ª P0 + 3 ä¸ª P1ï¼‰
  - Skills æ¨¡å—ï¼šF1 Skills ç”Ÿæˆå™¨ (P0), F2 Symlink ç®¡ç† (P0), F3 CLI æ¥å£ (P0)
  - Session æ¨¡å—ï¼šF4 ä¼šè¯è§£æ (P0), F5 Event æ˜ å°„ (P0), F6 å…³ç³»å…³è” (P1)
  - Git æ¨¡å—ï¼šF7 å†…å¤–æ˜ å°„ (P0), F8 Hooks ç®¡ç† (P1), F9 å®Œæˆå½’æ¡£ (P1)
  - Agent æ¨¡å—ï¼šF10 Agent å…³è” (P0)

**é‡åŒ–æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹å¼ |
| :--- | :--- | :--- |
| **Skills è°ƒç”¨æˆåŠŸç‡** | > 95% | Claude Code â†’ Elfiee CLI è°ƒç”¨ç»Ÿè®¡ |
| **ä¼šè¯åŒæ­¥è¦†ç›–ç‡** | > 90% | AI æ“ä½œè¢«è®°å½•ä¸º Event çš„æ¯”ä¾‹ |
| **å†…å¤–æ˜ å°„å‡†ç¡®ç‡** | 100% | Task-Branch-Commit å¯¹åº”å…³ç³» |
| **Dogfooding å®Œæˆåº¦** | ç”¨ Skills å®Œæˆ 1 ä¸ªçœŸå®åŠŸèƒ½ | PR åˆå¹¶ + Event å®Œæ•´æ€§ |

#### 3.3.2 äº§å“ç›®æ ‡

**ç«å“åˆ†æ**ï¼š

**Dogfooding å®éªŒ**ï¼š
- [ ] **å®éªŒè®¡åˆ’**ï¼šè®¾è®¡ Dogfooding æµç¨‹å’Œåœºæ™¯
- [ ] **è¯„ä»·æŒ‡æ ‡**ï¼šå®šä¹‰æ•ˆç‡ã€å®Œæ•´æ€§ã€å¯è¿½æº¯æ€§ç­‰æŒ‡æ ‡
- [ ] **å½’å› åˆ†æ**ï¼šåˆ†æå“ªäº›ç¯èŠ‚ææ•ˆã€å“ªäº›éœ€è¦ä¼˜åŒ–

---

## å››ã€Phase 2 å®Œæ•´ç”¨æˆ·æ•…äº‹ï¼ˆä¸²è”äº§å“ä¸ç ”å‘ï¼‰

### 4.1 æ•…äº‹èƒŒæ™¯

**è§’è‰²è®¾å®š**ï¼š
- **Developer**: ä½¿ç”¨ Claude Code è¿›è¡Œå¼€å‘
- **Elfiee**: åå°è¿è¡Œï¼Œè®°å½•å†³ç­–ï¼Œç®¡ç†æƒé™
- **Git**: å¤–éƒ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

**åœºæ™¯**: å¼€å‘è€…ä½¿ç”¨ Claude Code ä¸ºé¡¹ç›®æ·»åŠ "ç”¨æˆ·è®¤è¯"åŠŸèƒ½ï¼ŒElfiee åœ¨åå°è®°å½•æ•´ä¸ªè¿‡ç¨‹ã€‚

### 4.2 å®Œæ•´å·¥ä½œæµæ—¶åºå›¾

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant ELF as Elfiee
    participant CC as Claude Code
    participant Git as Git Repo

    Note over Dev,Git: === é˜¶æ®µ1: é¡¹ç›®åˆå§‹åŒ– ===
    Dev->>ELF: 1. åˆ›å»º/æ‰“å¼€ project.elf
    ELF->>ELF: è§£å‹ temp â†’ ç”Ÿæˆ root Directory Block
    ELF->>ELF: è‡ªåŠ¨åˆ›å»º .elf/ å…ƒæ•°æ®ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»º directory block .elfï¼‰

    Note over Dev,Git: === é˜¶æ®µ2: å¯¼å…¥ä»£ç ä»“åº“ ===
    Dev->>ELF: 2. directory.import(å¤–éƒ¨é¡¹ç›®è·¯å¾„)
    ELF->>ELF: åœ¨linked repo ä¸­åˆ›å»ºdir block {project-name}/ ç›®å½•ç»“æ„
    ELF->>ELF: å¦‚æœåŸé¡¹ç›®æœ‰.git/, å¤åˆ¶åŸ .git/hooks/ â†’ .elf/.git/hooks/{project_name}/
    ELF->>ELF: åœ¨å¤åˆ¶çš„ hooks ä¸­æ·»åŠ  Elfiee æ£€æŸ¥é€»è¾‘
    ELF->>Git: è°ƒç”¨æ²™ç®±å¯åŠ¨è„šæœ¬ï¼Œè®¾å®šelfieeå¯åŠ¨æ—¶å€™çš„hooksè·¯å¾„ä¸ºç¯å¢ƒå˜é‡ï¼Œå¹¶å¯ç”¨ï¼ˆä¿è¯åœ¨å¤–éƒ¨git initæ—¶ï¼Œä½¿ç”¨åŒä¸€å¥—hooksï¼‰

    Note over Dev,Git: === é˜¶æ®µ3: å…³è” Agentï¼ˆå…ˆ Claude åè®¤è¯ï¼‰===
    Dev->>CC: 3. å¯åŠ¨ Claude Code
    CC->>CC: æŒ‡å®š claude --session-id: "sess-abc123"
    Dev->>ELF: 4. åœ¨ Elfiee ä¸­"å…³è” Agent"
    ELF->>ELF: æ‰«æ ~/.claude/projects/ æ´»è·ƒ sessions
    ELF-->>Dev: æ˜¾ç¤ºå¯å…³è”çš„ session åˆ—è¡¨
    Dev->>ELF: é€‰æ‹© session "sess-abc123"
    ELF->>ELF: åˆ›å»º Agent Block
    ELF->>ELF: editor_id = "claude:sess-abc123"
    ELF->>ELF: è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªagentã€‚ 1. ç³»ç»Ÿçº§.elf/Agents/claude/SKILLS/ å’Œ 2. é¡¹ç›®çº§.elf/Agents/{project_name}/
    ELF-->>CC: å°†å„çº§/claude/SKILLSç›®å½•symlink åˆ° ~/.claude/skills/

    Note over Dev,Git: === é˜¶æ®µ4: ä»»åŠ¡åˆ›å»ºï¼ˆä¸¤ç§æ–¹å¼ï¼‰===
    alt æ–¹å¼A: Claude Code å†…åˆ›å»º
        Dev->>CC: 5a. ä½¿ç”¨ç³»ç»Ÿçº§SKILL /new-task "æ·»åŠ ç”¨æˆ·è®¤è¯"
        CC->>ELF: CLI: elfiee --agent claude:sess-abc123 core.create task
        CC->>ELF: CLI: elfiee --agent claude:sess-abc123 markdown.write {task_id} "å†…å®¹"
    else æ–¹å¼B: Elfiee å†…åˆ›å»º
        Dev->>ELF: 5b. åœ¨ Elfiee å†…æ–°å»º task.md
        Dev->>ELF: ç¼–è¾‘ä»»åŠ¡å†…å®¹
        Dev->>CC: è®© Claude é€šè¿‡ç³»ç»ŸSKILLè¯»å– task.md: markdown.read {task_id}
    end
    ELF->>ELF: åˆ›å»º .elf/Agents/session/log-{session-id}.md
    ELF->>ELF: core.link(session-log â†’ task.md)

    Note over Dev,Git: === é˜¶æ®µ5: AI å¼€å‘è¿‡ç¨‹ ===
    loop æ¯æ¬¡ Claude å“åº”å®Œæˆ
        CC->>ELF: CLI: elfiee code.write / markdown.write / ...
        ELF->>ELF: è®°å½• Eventï¼ŒVector Clock++
        ELF->>ELF: åŒæ­¥ä¼šè¯å†…å®¹åˆ° session/log-xxx.md
        Note right of ELF: åœ¨eventdbä¸­ï¼Œè®°å½•æ“ä½œçš„é¡ºåºï¼Œä¸ºä»¥åçš„å¤šagentåä½œçš„å¹‚ç­‰åˆå¹¶åšå‡†å¤‡
    end

    Note over Dev,Git: === é˜¶æ®µ6: å¯¼å‡ºä¸æäº¤ ===
    Dev->>ELF: 6. å¯¼å‡º (directory.export)
    ELF->>ELF: å†™å…¥ç‰©ç†æ–‡ä»¶
    ELF->>Git: åˆ›å»ºåˆ†æ”¯ (from task.md title)
    ELF->>Git: git commit (message from task.md)
    Git->>Git: CI/CD éªŒè¯

    Note over Dev,Git: === é˜¶æ®µ7: å®Œæˆä¸å½’æ¡£ ===
    Git-->>ELF: 7. PR åˆå¹¶ / æœ¬åœ° merge æ£€æµ‹
    ELF->>ELF: è‡ªåŠ¨åˆ›å»ºå½’æ¡£æ–‡æ¡£ (summary-{task}.md)
    ELF->>ELF: æ±‡æ€»ï¼šå¯¹è¯ Events + ç¼–è¾‘ Eventsï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰

    Note over Dev,Git: === é˜¶æ®µ8: SKILLS æ›´æ–° ===
    
    CC ->>ELF: 8. é€šè¿‡ç³»ç»ŸSKILLSè¯»å–æ–°ç”Ÿæˆçš„summary-{task}.mdæ–‡æ¡£ï¼Œæ›´æ–°é¡¹ç›®çº§SKILL.md
    
    opt å¦‚æœå®ç°äº†æ–°åŠŸèƒ½
        CC->>ELF: 9. æ›´æ–°ç³»ç»Ÿçº§SKILL.mdçš„æ¨¡æ¿
        Note right of ELF: Dogfooding: é€šè¿‡å¼€å‘elfieeé¡¹ç›®ï¼Œä¸æ–­æ›´æ–°ç³»ç»ŸSKILL
    end
```

### 4.3 è¯¦ç»†æ­¥éª¤è¯´æ˜

> **æ¶æ„è¯´æ˜**ï¼šæ‰€æœ‰å†…å®¹å‡ Block åŒ–ã€‚Directory Block å­˜å‚¨ç´¢å¼•ï¼ˆentriesï¼‰ï¼ŒContent Block å­˜å‚¨å®é™…å†…å®¹ï¼ˆ`block-{uuid}/body.*`ï¼‰ã€‚ç´¢å¼•ä¸å†…å®¹é€šè¿‡ Relation å…³è”ï¼Œæƒé™ç‹¬ç«‹ç®¡ç†ã€‚

---

#### Step 1: åˆ›å»º/æ‰“å¼€ .elf é¡¹ç›®

**æ“ä½œ**ï¼šç”¨æˆ·åˆ›å»ºæˆ–æ‰“å¼€ `project.elf` æ–‡ä»¶

**ç³»ç»Ÿè¡Œä¸º**ï¼š

1. **è§£å‹ä¸åˆå§‹åŒ–**ï¼š
   - è§£å‹ `.elf` (ZIP) åˆ°ä¸´æ—¶ç›®å½•
   - åŠ è½½ `_eventstore.db`ï¼Œé‡æ”¾ Events æ„å»º StateProjector

2. **ç”Ÿæˆæ ¹ Directory Block**ï¼š
   - åˆ›å»º Root Dir Blockï¼Œç´¢å¼•ä¸´æ—¶ç›®å½•ä¸‹æ‰€æœ‰ `block-{uuid}/` å†…å®¹
   - Dir Block çš„ `contents.entries` å­˜å‚¨ç´¢å¼•æ˜ å°„

3. **è‡ªåŠ¨åˆ›å»º `.elf/` å…ƒæ•°æ® Block ç»“æ„**ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼š

   ```
   block-{elf-meta-uuid}/          # .elf/ â†’ Directory Blockï¼ˆç´¢å¼•ï¼‰
   â”œâ”€â”€ entries: {
   â”‚     "SKILLS.md": {id: "skills-sys", type: "file"},
   â”‚     "Agents/": {id: "agents-dir", type: "directory"},
   â”‚     "git/": {id: "git-dir", type: "directory"}
   â”‚   }

   block-{skills-sys-uuid}/        # .elf/SKILLS.md â†’ Markdown Block
   â””â”€â”€ body.md                     # å†…ç½®é€šç”¨ Skills æ¨¡æ¿

   block-{agents-dir-uuid}/        # .elf/Agents/ â†’ Directory Block
   â””â”€â”€ entries: {}                 # åˆå§‹ä¸ºç©º

   block-{git-dir-uuid}/           # .elf/git/ â†’ Directory Block
   â””â”€â”€ entries: {"hooks/": {...}}

   block-{hooks-dir-uuid}/         # .elf/git/hooks/ â†’ Directory Block
   â””â”€â”€ entries: {}                 # åˆå§‹ä¸ºç©º
   ```

4. **Event è®°å½•**ï¼š
   - æ¯ä¸ª Block åˆ›å»ºç”Ÿæˆ `core.create` Event
   - Event åªè®°å½•å…ƒæ•°æ®ï¼ˆname, type, ownerï¼‰ï¼Œä¸å­˜å‚¨å®Œæ•´å†…å®¹
   - å®é™…å†…å®¹å­˜å‚¨åœ¨ `block-{uuid}/body.*` ç‰©ç†æ–‡ä»¶ä¸­

5. **å‰ç«¯å±•ç¤º**ï¼š
   - ä¸æ˜¾ç¤ºå®Œæ•´çš„ `.elf/` Directory Block
   - åªæ˜¾ç¤ºå…³é”®æ–‡ä»¶å¤¹ï¼š**SKILLS** / **Agents** / **Hooks**
   - ç½®é¡¶å±•ç¤ºï¼Œä¸æ™®é€šå†…å®¹åŒºåˆ†

6. **å†…ç½®é€šç”¨ SKILLS.md æ¨¡æ¿**ï¼ˆå­˜å‚¨åœ¨ `block-{skills-sys}/body.md`ï¼‰ï¼š
   ```markdown
   # Elfiee é€šç”¨ Skills

   ä½¿ç”¨ Elfiee CLI æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

   ## core.create
   åˆ›å»ºæ–° Block
   - å‘½ä»¤: `elfiee --agent {agent_id} core.create {block_type}`
   - ç¤ºä¾‹: `elfiee --agent claude:sess-abc core.create markdown`

   ## markdown.write
   å†™å…¥ Markdown å†…å®¹
   - å‘½ä»¤: `elfiee --agent {agent_id} markdown.write {block_id} "å†…å®¹"`

   ## code.write
   å†™å…¥ä»£ç å†…å®¹
   - å‘½ä»¤: `elfiee --agent {agent_id} code.write {block_id} "å†…å®¹"`

   ## core.link
   å»ºç«‹ Block å…³ç³»
   - å‘½ä»¤: `elfiee --agent {agent_id} core.link {source_id} {target_id} {relation}`
   ```

**éªŒè¯ç‚¹**ï¼š
- æ¯ä¸ªæ–°å»ºçš„ .elf æ–‡ä»¶éƒ½è‡ªåŠ¨åŒ…å« `.elf/` å…ƒæ•°æ® Block ç»“æ„
- é€šç”¨ SKILLS.md æ˜¯å¯ç¼–è¾‘çš„ Markdown Block

---

#### Step 2: å¯¼å…¥ä»£ç ä»“åº“

**æ“ä½œ**ï¼šç”¨æˆ·æ‰§è¡Œ `directory.import(å¤–éƒ¨é¡¹ç›®è·¯å¾„)`

**ç³»ç»Ÿè¡Œä¸º**ï¼š

1. **æ‰«ææºç›®å½•**ï¼š
   - éå†å¤–éƒ¨é¡¹ç›®ï¼Œè¿‡æ»¤äºŒè¿›åˆ¶æ–‡ä»¶å’Œ `.git/` ç›®å½•
   - æŒ‰æ–‡ä»¶ç±»å‹æ¨æ–­ Block ç±»å‹ï¼ˆmarkdown, code ç­‰ï¼‰

2. **åˆ›å»ºé¡¹ç›® Directory Block**ï¼š
   ```
   block-{project-dir-uuid}/       # {project-name}/ â†’ Directory Block
   â””â”€â”€ entries: {
         "src/main.rs": {id: "main-rs", type: "file"},
         "README.md": {id: "readme", type: "file"},
         ...
       }
   â””â”€â”€ metadata: {
         external_root_path: "/path/to/project"
       }
   ```

3. **åˆ›å»ºå†…å®¹ Block**ï¼ˆæ¯ä¸ªå¯¼å…¥çš„æ–‡ä»¶ï¼‰ï¼š
   ```
   block-{main-rs-uuid}/           # src/main.rs â†’ Code Block
   â””â”€â”€ body.rs                     # å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°æ­¤

   block-{readme-uuid}/            # README.md â†’ Markdown Block
   â””â”€â”€ body.md                     # å¤åˆ¶æ–‡ä»¶å†…å®¹åˆ°æ­¤
   ```

4. **å»ºç«‹ Relation**ï¼š
   - Dir Block â†’ Content Blockï¼ˆ`contains` å…³ç³»ï¼‰
   - é€šè¿‡ `children` å­—æ®µæˆ–åç»­ Relation æ¨¡å—ç®¡ç†

5. **æ›´æ–° `.elf/` å…ƒæ•°æ®**ï¼š
   ```
   .elf/projects/{project-name}/   # æ–°å¢é¡¹ç›®çº§ç›®å½•
   â”œâ”€â”€ SKILLS.md                   # é¡¹ç›®çº§ Skillsï¼ˆå·¥ä½œæµã€è§„èŒƒï¼‰
   â””â”€â”€ CLAUDE.md                   # é¡¹ç›®çº§ Claude é…ç½®
   ```

6. **Git Hooks å¤„ç†**ï¼š
   - æ£€æµ‹å¤–éƒ¨é¡¹ç›®æ˜¯å¦æœ‰ `.git/hooks/`
   - å¤åˆ¶åŸ hooks åˆ° `.elf/git/hooks/{project-name}/`ï¼ˆä½œä¸º Code Blockï¼‰
   - åœ¨å¤åˆ¶çš„ hooks ä¸­**è¿½åŠ ** Elfiee æ£€æŸ¥é€»è¾‘
   - è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä¾›æ²™ç®±å¯åŠ¨è„šæœ¬ä½¿ç”¨

**å¤åˆ¶åçš„ pre-commit ç¤ºä¾‹**ï¼ˆå­˜å‚¨åœ¨ `block-{hook-uuid}/body.sh`ï¼‰ï¼š
```bash
#!/bin/bash
# === åŸæœ‰ hooks å†…å®¹ï¼ˆå¤åˆ¶è‡ª .git/hooks/pre-commitï¼‰===
# ... åŸæœ‰é€»è¾‘ ...

# === Elfiee è¿½åŠ çš„æ£€æŸ¥é€»è¾‘ ===
if command -v elfiee &> /dev/null; then
    elfiee check-commit "$@"
fi
```

7. **Event è®°å½•**ï¼š
   - `core.create` Ã— Nï¼ˆæ¯ä¸ª Blockï¼‰
   - `directory.import` è®°å½•å¯¼å…¥æ“ä½œå…ƒæ•°æ®
   - Event ä¸å­˜å‚¨æ–‡ä»¶å†…å®¹ï¼Œåªå­˜ç´¢å¼•å’Œå¼•ç”¨

**SKILLS å±‚çº§è®¾è®¡**ï¼š
- **é€šç”¨ SKILLS**ï¼ˆ`.elf/SKILLS.md`ï¼‰ï¼šElfiee ç¼–è¾‘æŒ‡ä»¤
- **é¡¹ç›®çº§ SKILLS**ï¼ˆ`.elf/projects/{name}/SKILLS.md`ï¼‰ï¼šé¡¹ç›®ä»£ç å·¥ä½œæµã€å¼€å‘è§„èŒƒ

---

#### Step 3: å…³è” Agentï¼ˆå…ˆå‘èµ· Claudeï¼Œå†è®¤è¯ï¼‰

**æ“ä½œ**ï¼šç”¨æˆ·å¯åŠ¨ Claude Codeï¼Œç„¶ååœ¨ Elfiee ä¸­å…³è”

**å·¥ä½œæµ**ï¼š

1. **ç”¨æˆ·å¯åŠ¨ Claude Code**ï¼š
   ```bash
   claude --session-id sess-abc123
   ```
   - Claude ç”Ÿæˆå”¯ä¸€çš„ session_id

2. **ç”¨æˆ·åœ¨ Elfiee ä¸­ç‚¹å‡»"å…³è” Agent"**

3. **Elfiee æ‰«ææ´»è·ƒ sessions**ï¼š
   - è¯»å– `~/.claude/projects/` ä¸‹çš„ `.jsonl` æ–‡ä»¶
   - è§£ææ´»è·ƒçš„ session åˆ—è¡¨
   - æ˜¾ç¤ºå¯å…³è”çš„ session

4. **ç”¨æˆ·é€‰æ‹©è¦å…³è”çš„ session**

5. **åˆ›å»º Agent Block ç»“æ„**ï¼š
   ```
   block-{agent-uuid}/             # Agent Block
   â””â”€â”€ body.json                   # Agent é…ç½®
       {
         "provider": "claude",
         "session_id": "sess-abc123",
         "editor_id": "claude:sess-abc123",
         "linked_projects": ["project-name"]
       }

   .elf/Agents/claude/             # ç³»ç»Ÿçº§ Agent ç›®å½•
   â””â”€â”€ SKILLS.md                   # ç³»ç»Ÿçº§ Skills

   .elf/Agents/{project-name}/     # é¡¹ç›®çº§ Agent ç›®å½•
   â””â”€â”€ SKILLS.md                   # åˆå¹¶åçš„ Skillsï¼ˆé€šç”¨ + é¡¹ç›®çº§ï¼‰
   ```

6. **åˆ›å»º Symlink**ï¼š
   ```
   ~/.claude/skills/elfiee-{project} â†’ block-{agent-skills}/body.md
   ```
   - Symlink æŒ‡å‘ä¸´æ—¶ç›®å½•ä¸­çš„ç‰©ç†æ–‡ä»¶
   - å…³é—­ .elf æ—¶è‡ªåŠ¨æ¸…ç†

7. **æ³¨å†Œ Editor**ï¼š
   - åˆ›å»º Editorï¼Œ`editor_id = "claude:sess-abc123"`
   - æˆäºˆé»˜è®¤æƒé™ï¼ˆcore.create, markdown.write, code.write ç­‰ï¼‰

**èº«ä»½å”¯ä¸€æ€§ä¿è¯**ï¼š
- `editor_id = {provider}:{session_id}`
- Claude `sess-abc123` â†’ `claude:sess-abc123`
- Cursor `cursor-xyz789` â†’ `cursor:cursor-xyz789`
- ä¸åŒ AI å·¥å…·ã€ä¸åŒä¼šè¯çš„ editor_id å®Œå…¨ä¸åŒ

**éªŒè¯ç‚¹**ï¼šå¿…é¡»å…ˆå¯åŠ¨ AI å·¥å…·è·å– session_idï¼Œå†åœ¨ Elfiee ä¸­å…³è”

---

#### Step 4: ä»»åŠ¡åˆ›å»ºï¼ˆä¸¤ç§æ–¹å¼ï¼‰

**æ–¹å¼ Aï¼šåœ¨ Claude Code ä¸­åˆ›å»º**

ç”¨æˆ·è¾“å…¥ï¼š`/new-task "æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½"`

Claude é€šè¿‡ SKILLS æ‰§è¡Œå‘½ä»¤åºåˆ—ï¼š
```bash
# 1. åˆ›å»ºä»»åŠ¡ Block
elfiee --agent claude:sess-abc123 core.create task
# è¿”å›: {"block_id": "task-001", "block_dir": "/tmp/xxx/block-task-001"}

# 2. å†™å…¥ä»»åŠ¡å†…å®¹ï¼ˆå†™å…¥ block-task-001/body.mdï¼‰
elfiee --agent claude:sess-abc123 markdown.write task-001 "# æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½\n\n## éœ€æ±‚\n..."

# 3. åˆ›å»º session log Block
elfiee --agent claude:sess-abc123 core.create markdown --name "session-log-001"

# 4. å»ºç«‹å…³è”
elfiee --agent claude:sess-abc123 core.link session-log-001 task-001 tracks
```

**æ–¹å¼ Bï¼šåœ¨ Elfiee ä¸­åˆ›å»º**

1. ç”¨æˆ·åœ¨ Elfiee å†…æ–°å»º `task.md`ï¼ˆåˆ›å»º Markdown Blockï¼‰
2. ç¼–è¾‘ä»»åŠ¡å†…å®¹ï¼ˆéœ€æ±‚ã€éªŒæ”¶æ ‡å‡†ç­‰ï¼‰
3. åœ¨ Claude Code ä¸­ï¼š`è¯·è¯»å–å¹¶æ‰§è¡Œ task.md`
4. Claude é€šè¿‡ CLI è¯»å–ä»»åŠ¡ï¼š
   ```bash
   elfiee --agent claude:sess-abc123 markdown.read task-001
   ```

**ä¼šè¯å…³è”**ï¼š
- ä»»åŠ¡åˆ›å»ºæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»º `session/log-{session-id}.md` Block
- å»ºç«‹ Relationï¼š`session-log â†’ task.md (tracks)`
- Event è®°å½•å®Œæ•´çš„å…³è”é“¾

---

#### Step 5: AI å¼€å‘è¿‡ç¨‹ä¸ä¼šè¯åŒæ­¥

**å¼€å‘è¿‡ç¨‹**ï¼šClaude é€šè¿‡ CLI æ‰§è¡Œæ“ä½œ

```bash
[14:32:01] elfiee --agent claude:sess-abc123 core.create code --name "auth.rs"
           â†’ åˆ›å»º block-{auth-uuid}/body.rs
           â†’ Event{entity: "auth-uuid", attr: "claude:sess-abc123/core.create", vc: {1}}

[14:32:15] elfiee --agent claude:sess-abc123 code.write auth-uuid "fn authenticate()..."
           â†’ å†™å…¥ block-{auth-uuid}/body.rs
           â†’ Event{entity: "auth-uuid", attr: "claude:sess-abc123/code.write", vc: {2}}

[14:33:42] elfiee --agent claude:sess-abc123 core.link auth-uuid task-001 implements
           â†’ å»ºç«‹ Relation
           â†’ Event{entity: "auth-uuid", attr: "claude:sess-abc123/core.link", vc: {3}}
```

**ä¼šè¯åŒæ­¥æœºåˆ¶**ï¼š

æ¯æ¬¡ Claude å“åº”å®Œæˆï¼Œè§¦å‘åŒæ­¥ï¼š

1. **ç›‘å¬ä¼šè¯æ–‡ä»¶**ï¼š
   - Elfiee ç›‘å¬ `~/.claude/projects/{path}/{session}.jsonl`
   - æ£€æµ‹æ–‡ä»¶å˜åŒ–ï¼ˆinotify/FSEventsï¼‰

2. **è§£ææ–°å¢å†…å®¹**ï¼š
   - æå–ç”¨æˆ·è¾“å…¥å’Œ Claude å“åº”
   - æ ¼å¼åŒ–ä¸º Markdown

3. **å†™å…¥ session log Block**ï¼š
   - è¿½åŠ å†…å®¹åˆ° `block-{session-log}/body.md`
   - ç”Ÿæˆ `markdown.write` Event

4. **ä¿æŒæ—¶åº**ï¼š
   ```
   Event é¡ºåºï¼ˆæŒ‰ Vector Clockï¼‰ï¼š
   vc: {1} â†’ markdown.write(session-log, "ç”¨æˆ·: æ·»åŠ è®¤è¯...")
   vc: {2} â†’ code.write(auth.rs, "fn authenticate()...")
   vc: {3} â†’ core.link(auth.rs â†’ task.md)
   ```

5. **å…³è”åŒ¹é…**ï¼š
   - é€šè¿‡ Vector Clock å€¼å»ºç«‹ä¼šè¯-ä»£ç çš„ç²¾ç¡®å…³è”
   - ä¸ºåç»­å¤š Agent åä½œçš„å¹‚ç­‰åˆå¹¶åšå‡†å¤‡

---

#### Step 6: å¯¼å‡ºä¸ Git æäº¤

**æ“ä½œ**ï¼šç”¨æˆ·æ‰§è¡Œå¯¼å‡º

**ç³»ç»Ÿè¡Œä¸º**ï¼š

1. **directory.export**ï¼š
   - éå†é¡¹ç›® Dir Block çš„ entries
   - å°†æ¯ä¸ª Content Block çš„ `body.*` å†™å…¥å¤–éƒ¨ç›®å½•
   - ä¿æŒåŸæœ‰ç›®å½•ç»“æ„

2. **ä» task.md æå–ä¿¡æ¯**ï¼š
   - è¯»å– task Block çš„ `body.md`
   - è§£æ `title` â†’ åˆ†æ”¯åï¼ˆå¦‚ `feat/user-auth`ï¼‰
   - è§£æ `content` â†’ commit message

3. **æ‰§è¡Œ Git æ“ä½œ**ï¼š
   ```bash
   # åˆ‡æ¢ hooks è·¯å¾„
   git config core.hooksPath .elf/git/hooks/{project-name}

   # åˆ›å»ºåˆ†æ”¯å¹¶æäº¤
   git checkout -b feat/user-auth
   git add <exported_files>
   git commit -m "æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½

   - å®ç° JWT è®¤è¯
   - æ·»åŠ ç”¨æˆ·ç™»å½•æ¥å£

   Task: task-001
   Session: sess-abc123"

   git push origin feat/user-auth  # å¯é€‰
   ```

4. **Hooks è‡ªåŠ¨ç”Ÿæ•ˆ**ï¼š
   - å› ä¸º `core.hooksPath` å·²è®¾ç½®ï¼ŒElfiee hooks è¢«è°ƒç”¨
   - `elfiee check-commit` è®°å½• commit ä¸ task çš„å…³è”

---

#### Step 7: å®Œæˆå½’æ¡£ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰

**è§¦å‘æ¡ä»¶**ï¼š
- æœ¬åœ°æ£€æµ‹åˆ° mergeï¼ˆç›‘å¬ git reflogï¼‰
- æˆ–è¿œç¨‹ PR åˆå¹¶ï¼ˆGitHub webhook / å®šæœŸè½®è¯¢ï¼‰

**ç³»ç»Ÿè¡Œä¸º**ï¼š

1. **åˆ›å»ºå½’æ¡£ Block**ï¼š
   ```
   block-{summary-uuid}/           # archive/summary-{task}.md
   â””â”€â”€ body.md                     # å½’æ¡£å†…å®¹
   ```

2. **æ±‡æ€»å†…å®¹**ï¼ˆæŒ‰ Event æ—¶é—´é¡ºåºï¼‰ï¼š
   ```markdown
   # ä»»åŠ¡å½’æ¡£ï¼šæ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½

   ## å…ƒä¿¡æ¯
   - ä»»åŠ¡ ID: task-001
   - ä¼šè¯ ID: sess-abc123
   - å®Œæˆæ—¶é—´: 2026-01-23 15:00:00
   - æäº¤: feat/user-auth â†’ main

   ## æ—¶é—´çº¿

   ### 14:32:01 - ä¼šè¯å¼€å§‹
   ::::{note} å¯¹è¯è®°å½•
   ç”¨æˆ·ï¼šæ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼Œè¦æ±‚æ”¯æŒ JWT...
   Claudeï¼šå¥½çš„ï¼Œæˆ‘æ¥åˆ†æéœ€æ±‚...
   ::::

   ### 14:32:15 - ä»£ç åˆ›å»º
   ::::{code-block} rust
   :caption: auth.rs
   fn authenticate() { ... }
   ::::

   ### 14:33:42 - å…³ç³»å»ºç«‹
   - auth.rs â†’ task.md (implements)

   ## ç›¸å…³èµ„æº
   - åŸå§‹ä»»åŠ¡ï¼š[[task-001]]
   - ä»£ç æ–‡ä»¶ï¼š[[auth-uuid]]
   - ä¼šè¯è®°å½•ï¼š[[session-log-001]]
   ```

3. **å»ºç«‹ Relation**ï¼š
   - `summary â†’ task (archives)`
   - `summary â†’ session-log (summarizes)`

---

#### Step 8: é¡¹ç›®å…³é—­ä¸ Hooks æ¢å¤

**æ“ä½œ**ï¼šç”¨æˆ·å…³é—­ Elfiee æˆ–å…³é—­é¡¹ç›®

**ç³»ç»Ÿè¡Œä¸º**ï¼š

1. **æ¢å¤ Git é…ç½®**ï¼š
   ```bash
   git config --unset core.hooksPath
   ```

2. **æ¸…ç† Symlink**ï¼š
   - åˆ é™¤ `~/.claude/skills/elfiee-{project}`

3. **ä¿å­˜ .elf**ï¼š
   - å°†ä¸´æ—¶ç›®å½•é‡æ–°æ‰“åŒ…ä¸º `.elf` (ZIP)
   - åŒ…å«æ‰€æœ‰ `block-{uuid}/` ç›®å½•å’Œ `_eventstore.db`

4. **åŸé¡¹ç›®ä¸å—å½±å“**ï¼š
   - `.git/hooks/` å®Œå…¨ä¸å˜
   - æ­£å¸¸æäº¤ä¸å—å½±å“

---

#### Step 9: SKILLS æ›´æ–°ï¼ˆå¯é€‰ï¼‰

**è§¦å‘æ¡ä»¶**ï¼šä»»åŠ¡æ¶‰åŠæ–°åŠŸèƒ½/æ–°è§„èŒƒ

**æ›´æ–°æµç¨‹**ï¼š

1. **é¡¹ç›®çº§ SKILLS è‡ªåŠ¨æ›´æ–°**ï¼š
   - Claude è¯»å–å½’æ¡£æ–‡æ¡£
   - æå–æ–°å¢çš„èƒ½åŠ›/è§„èŒƒ
   - è¿½åŠ åˆ° `.elf/projects/{project}/SKILLS.md`

2. **ç³»ç»Ÿçº§ SKILLS æ‰‹åŠ¨æ›´æ–°**ï¼š
   - éœ€è¦äººå·¥å®¡æ ¸
   - é€šè¿‡ Claude è¾…åŠ©ç¼–è¾‘ `.elf/SKILLS.md`

**Dogfooding åœºæ™¯**ï¼š
```markdown
## æ–°å¢èƒ½åŠ›ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

### auth.validate
éªŒè¯ç”¨æˆ·èº«ä»½
- å‘½ä»¤: `elfiee --agent {agent_id} auth.validate {token}`
- ç¤ºä¾‹: `elfiee --agent claude:sess-abc auth.validate "eyJhbG..."`
- æ¥æº: [[summary-task-001]]
```

---

## äº”ã€Phase 2 åŠŸèƒ½æ¨¡å—æ‹†åˆ†

### 5.1 æ¨¡å—æ€»è§ˆ

Phase 2 åŒ…å«ä¸¤å¤§ç±»æ”¹åŠ¨ï¼š

| ç±»åˆ« | æ¨¡å— | æè¿° |
|:---|:---|:---|
| **åŸºç¡€è®¾æ–½** | Block å­˜å‚¨ã€Event ä¼˜åŒ–ã€Relation å¢å¼ºã€Dir Block æ”¹é€  | æ”¯æ’‘ AI é›†æˆçš„åº•å±‚æ”¹åŠ¨ |
| **AI é›†æˆ** | Agentã€CLIã€Skillsã€Session åŒæ­¥ã€Git é›†æˆ | Phase 2 æ ¸å¿ƒåŠŸèƒ½ |

---

### 5.2 åŸºç¡€è®¾æ–½æ¨¡å—ï¼ˆ4 ä¸ªï¼‰

#### A. Block å­˜å‚¨æ”¹é€ 

| ç¼–å· | åŠŸèƒ½åç§° | æ”¹åŠ¨æè¿° | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **I1** | å†…å®¹ç‰©ç†å­˜å‚¨ | Content Block å†…å®¹å­˜å‚¨åˆ° `block-{uuid}/body.*` ç‰©ç†æ–‡ä»¶ï¼Œè€Œé Event.value | âœ“ `code.write` å†™å…¥ç‰©ç†æ–‡ä»¶ <br> âœ“ `markdown.write` å†™å…¥ç‰©ç†æ–‡ä»¶ <br> âœ“ è¯»å–æ—¶ä»ç‰©ç†æ–‡ä»¶åŠ è½½ | P0 |
| **I2** | ç´¢å¼•ä¸å†…å®¹åˆ†ç¦» | Dir Block åªå­˜ç´¢å¼•ï¼ˆentriesï¼‰ï¼Œé€šè¿‡å¼•ç”¨æŒ‡å‘ Content Block | âœ“ `directory.import` åˆ›å»ºç´¢å¼• + å†…å®¹ Block <br> âœ“ ç´¢å¼•æƒé™ä¸å†…å®¹æƒé™ç‹¬ç«‹ | P0 |
| **I3** | Block ç›®å½•ç»“æ„ | æ¯ä¸ª Block å¯¹åº” `block-{uuid}/` ç›®å½•ï¼Œæ”¯æŒ `body.*` + `assets/` | âœ“ `core.create` è‡ªåŠ¨åˆ›å»ºç›®å½• <br> âœ“ æ”¯æŒå¤šæ–‡ä»¶èµ„äº§ | P0 |

#### B. Event å­˜å‚¨ä¼˜åŒ–

| ç¼–å· | åŠŸèƒ½åç§° | æ”¹åŠ¨æè¿° | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **I4** | Event è½»é‡åŒ– | Event.value åªå­˜æ“ä½œå…ƒæ•°æ®ï¼Œä¸å­˜å®Œæ•´å†…å®¹ | âœ“ `code.write` Event ä¸å«æ–‡ä»¶å†…å®¹ <br> âœ“ EventDB ä½“ç§¯æ˜¾è‘—å‡å° | P0 |
| **I5** | æ“ä½œå®¡è®¡ | Event è®°å½•æ“ä½œç±»å‹ã€æ—¶é—´ã€æ“ä½œè€…ï¼Œå¯é€‰å­˜ diff | âœ“ æ”¯æŒå†å²æ“ä½œå›æº¯ <br> âœ“ å¯é€‰å¼€å¯ diff å­˜å‚¨ | P1 |

#### C. Relation å¢å¼º

| ç¼–å· | åŠŸèƒ½åç§° | æ”¹åŠ¨æè¿° | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **I6** | ç´¢å¼•å…³ç³»ç±»å‹ | æ–°å¢ `contains` å…³ç³»ç±»å‹ï¼Œè¡¨ç¤º Dir Block åŒ…å« Content Block | âœ“ `directory.import` è‡ªåŠ¨å»ºç«‹ <br> âœ“ æ”¯æŒæŸ¥è¯¢"ç›®å½•åŒ…å«å“ªäº›æ–‡ä»¶" | P0 |
| **I7** | åå‘ç´¢å¼• | StateProjector ç»´æŠ¤åå‘ç´¢å¼•ï¼Œæ”¯æŒ"è°å¼•ç”¨äº†æˆ‘"æŸ¥è¯¢ | âœ“ `get_parents(block_id)` æ¥å£ <br> âœ“ å®æ—¶æ›´æ–° | P1 |
| **I8** | å…³ç³»ç±»å‹æ‰©å±• | æ”¯æŒ `tracks`, `implements`, `archives`, `generated_by` ç­‰ | âœ“ ä»»åŠ¡-ä»£ç å…³è” <br> âœ“ ä¼šè¯-ä»£ç å…³è” | P0 |

#### D. Dir Block æ”¹é€ 

| ç¼–å· | åŠŸèƒ½åç§° | æ”¹åŠ¨æè¿° | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **I9** | entries ç´¢å¼•ç»“æ„ | `contents.entries` åªå­˜ `{path: {id, type}}`ï¼Œä¸å­˜æ–‡ä»¶å†…å®¹ | âœ“ ä¸ç°æœ‰ç»“æ„å…¼å®¹ <br> âœ“ æ”¯æŒåµŒå¥—ç›®å½• | P0 |
| **I10** | .elf/ å…ƒæ•°æ®ç›®å½• | è‡ªåŠ¨åˆ›å»º `.elf/` Dir Block ç»“æ„ï¼ˆSKILLS, Agents, git/hooksï¼‰ | âœ“ æ–°å»º .elf è‡ªåŠ¨åˆ›å»º <br> âœ“ å‰ç«¯åªæ˜¾ç¤ºå…³é”®æ–‡ä»¶å¤¹ | P0 |
| **I11** | directory.import æ”¹é€  | å¯¼å…¥æ—¶å¤åˆ¶æ–‡ä»¶åˆ° `block-{uuid}/body.*`ï¼Œåˆ›å»ºç´¢å¼• | âœ“ æ”¯æŒå¢é‡å¯¼å…¥ <br> âœ“ æ”¯æŒè¿‡æ»¤è§„åˆ™ | P0 |
| **I12** | directory.export æ”¹é€  | å¯¼å‡ºæ—¶ä» Content Block è¯»å–å†…å®¹å†™å…¥å¤–éƒ¨ | âœ“ ä¿æŒç›®å½•ç»“æ„ <br> âœ“ æ”¯æŒéƒ¨åˆ†å¯¼å‡º | P0 |

---

### 5.3 AI é›†æˆæ¨¡å—ï¼ˆ5 ä¸ªï¼‰

#### A. Agent æ¨¡å—

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **F1** | Agent Block | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦åˆ›å»º Agent Block å­˜å‚¨ AI ä¼šè¯é…ç½® | âœ“ å­˜å‚¨ provider, session_id, editor_id <br> âœ“ å…³è”é¡¹ç›®å’Œ SKILLS | P0 |
| **F2** | Session æ‰«æ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee è‡ªåŠ¨å‘ç°å¯å…³è”çš„ AI sessions | âœ“ æ‰«æ ~/.claude/projects/ <br> âœ“ æ˜¾ç¤ºæ´»è·ƒ session åˆ—è¡¨ | P0 |
| **F3** | Agent å…³è” | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›å°† Claude session å…³è”ä¸º Elfiee Agent | âœ“ ç”¨æˆ·é€‰æ‹© session è¿›è¡Œå…³è” <br> âœ“ åˆ›å»º Editorï¼Œeditor_id = {provider}:{session_id} | P0 |

#### B. CLI æ¨¡å—

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **F4** | CLI æ¥å£ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦æä¾› CLI ä¾› AI å·¥å…·è°ƒç”¨ | âœ“ `elfiee --agent {id} {capability} {args}` <br> âœ“ æ”¯æŒ JSON è¾“å‡º | P0 |
| **F5** | IPC é€šä¿¡ | ä½œä¸º CLIï¼Œæˆ‘éœ€è¦ä¸è¿è¡Œä¸­çš„ Elfiee é€šä¿¡ | âœ“ Unix Socket / Named Pipe <br> âœ“ å‘½ä»¤è½¬å‘å’Œç»“æœè¿”å› | P0 |
| **F6** | elfiee-ext-gen æ”¹é€  | ä½œä¸º CLIï¼Œæˆ‘éœ€è¦é€šè¿‡ Elfiee å‘½ä»¤ç”Ÿæˆä»£ç  | âœ“ åŸæœ‰ç›´æ¥ç”Ÿæˆæ”¹ä¸ºè°ƒç”¨ CLI <br> âœ“ ç”Ÿæˆåè‡ªåŠ¨ directory.export | P1 |

#### C. Skills æ¨¡å—

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **F7** | Skills æ¨¡æ¿ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦å†…ç½®é€šç”¨ SKILLS.md æ¨¡æ¿ | âœ“ åŒ…å« core.create, markdown.write ç­‰ <br> âœ“ å¯ç¼–è¾‘ï¼ˆMarkdown Blockï¼‰ | P0 |
| **F8** | é¡¹ç›®çº§ Skills | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›æ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„ SKILLS | âœ“ å¯¼å…¥é¡¹ç›®æ—¶è‡ªåŠ¨åˆ›å»º <br> âœ“ å­˜å‚¨é¡¹ç›®å·¥ä½œæµè§„èŒƒ | P0 |
| **F9** | Symlink ç®¡ç† | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee è‡ªåŠ¨å°† Skills é“¾æ¥åˆ° Claude ç›®å½• | âœ“ åˆ›å»º symlink åˆ° ~/.claude/skills/ <br> âœ“ å…³é—­æ—¶æ¸…ç† symlink | P0 |

#### D. Session åŒæ­¥æ¨¡å—

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **F10** | ä¼šè¯ç›‘å¬ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦ç›‘å¬ Claude ä¼šè¯æ–‡ä»¶å˜åŒ– | âœ“ ç›‘å¬ ~/.claude/projects/{path}/*.jsonl <br> âœ“ å®æ—¶æ£€æµ‹æ–°å¢å†…å®¹ | P0 |
| **F11** | ä¼šè¯è§£æ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦è§£æ Claude JSONL æ ¼å¼ | âœ“ æå–ç”¨æˆ·è¾“å…¥å’Œ AI å“åº” <br> âœ“ æ ¼å¼åŒ–ä¸º Markdown | P0 |
| **F12** | Event æ˜ å°„ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦å°†ä¼šè¯å†…å®¹æ˜ å°„ä¸º Events | âœ“ å†™å…¥ session-log Block <br> âœ“ ä¿æŒæ—¶åºï¼ˆä¼šè¯ Event åœ¨ä»£ç  Event ä¹‹å‰ï¼‰ | P0 |
| **F13** | å…³ç³»å…³è” | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°ä¼šè¯ä¸ä»£ç çš„å…³è” | âœ“ é€šè¿‡ Vector Clock åŒ¹é… <br> âœ“ å»ºç«‹ generated_by å…³ç³» | P1 |

#### E. Git é›†æˆæ¨¡å—

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **F14** | Hooks å¤åˆ¶ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee ä¸æ±¡æŸ“åŸé¡¹ç›® hooks | âœ“ å¤åˆ¶åŸ hooks åˆ° .elf/git/hooks/ <br> âœ“ è¿½åŠ  Elfiee æ£€æŸ¥é€»è¾‘ | P0 |
| **F15** | Hooks åˆ‡æ¢ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee ç®¡ç† hooks ç”Ÿå‘½å‘¨æœŸ | âœ“ æ‰“å¼€æ—¶è®¾ç½® core.hooksPath <br> âœ“ å…³é—­æ—¶æ¢å¤åŸé…ç½® | P0 |
| **F16** | å†…å¤–æ˜ å°„ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› task.md é©±åŠ¨ Git æ“ä½œ | âœ“ task title â†’ åˆ†æ”¯å <br> âœ“ task content â†’ commit message | P0 |
| **F17** | å®Œæˆå½’æ¡£ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›ä»»åŠ¡å®Œæˆåè‡ªåŠ¨ç”Ÿæˆå½’æ¡£ | âœ“ æ£€æµ‹ merge <br> âœ“ ç”Ÿæˆ summary Block <br> âœ“ æ±‡æ€»å¯¹è¯ + ç¼–è¾‘ Events | P1 |

---

### 5.4 äº§å“ç ”ç©¶æ‹†åˆ†

| ç¼–å· | ç ”ç©¶ä¸»é¢˜ | ç ”ç©¶é—®é¢˜ | äº§å‡ºç‰© | ä¼˜å…ˆçº§ |
|:---|:---|:---|:---|:---|
| **R1** | Dogfooding å®éªŒè®¾è®¡ | å¦‚ä½•è®¾è®¡æœ‰æ•ˆçš„ Dogfooding æµç¨‹ï¼Ÿéœ€è¦å“ªäº›åœºæ™¯è¦†ç›–ï¼Ÿ | å®éªŒè®¡åˆ’æ–‡æ¡£ + åœºæ™¯æ¸…å• | P0 |
| **R2** | è¯„ä»·æŒ‡æ ‡å®šä¹‰ | å¦‚ä½•é‡åŒ– Skills é›†æˆçš„æ•ˆæœï¼Ÿæ•ˆç‡ã€å®Œæ•´æ€§ã€å¯è¿½æº¯æ€§å¦‚ä½•è¡¡é‡ï¼Ÿ | æŒ‡æ ‡ä½“ç³» + æ•°æ®é‡‡é›†æ–¹æ¡ˆ | P0 |
| **R3** | å½’å› åˆ†ææ–¹æ³• | å“ªäº›ç¯èŠ‚ææ•ˆäº†ï¼Ÿå“ªäº›æ˜¯ç“¶é¢ˆï¼Ÿå¦‚ä½•å½’å› ï¼Ÿ | åˆ†ææ¡†æ¶ + å½’å› æŠ¥å‘Šæ¨¡æ¿ | P0 |

---

### 5.5 åŠŸèƒ½ä¾èµ–å…³ç³»

```mermaid
graph TD
    subgraph åŸºç¡€è®¾æ–½
        I1[Block å­˜å‚¨æ”¹é€ ] --> I2[ç´¢å¼•ä¸å†…å®¹åˆ†ç¦»]
        I2 --> I9[Dir Block entries]
        I4[Event è½»é‡åŒ–] --> I1
        I6[Relation å¢å¼º] --> I2
    end

    subgraph AIé›†æˆ
        I9 --> I10[.elf å…ƒæ•°æ®ç›®å½•]
        I10 --> F7[Skills æ¨¡æ¿]
        F7 --> F9[Symlink ç®¡ç†]

        F1[Agent Block] --> F3[Agent å…³è”]
        F3 --> F4[CLI æ¥å£]
        F4 --> F5[IPC é€šä¿¡]

        F10[ä¼šè¯ç›‘å¬] --> F11[ä¼šè¯è§£æ]
        F11 --> F12[Event æ˜ å°„]
        I6 --> F13[å…³ç³»å…³è”]

        F14[Hooks å¤åˆ¶] --> F15[Hooks åˆ‡æ¢]
        F15 --> F16[å†…å¤–æ˜ å°„]
        F16 --> F17[å®Œæˆå½’æ¡£]
    end

    I1 --> F4
    I9 --> F14
```

---

## å…­ã€Phase 2 ä¸åšä»€ä¹ˆï¼ˆè¾¹ç•Œæ¸…æ™°ï¼‰

| ä¸åš | åŸå›  | æ¨è¿Ÿåˆ°é˜¶æ®µ |
| :--- | :--- | :--- |
| âŒ **HTTP ç½‘å…³** | æœ¬åœ°åº”ç”¨ä½¿ç”¨ CLI + IPC æ›´è½»é‡ | - |
| âŒ **å®Œå…¨è‡ªåŠ¨åŒæ­¥** | æ‰‹åŠ¨/è§¦å‘å¼åŒæ­¥æ›´å¯æ§ï¼Œé¿å…æ€§èƒ½é—®é¢˜ | Phase 3 |
| âŒ **è‡ªå®šä¹‰ Skills è¯­æ³•** | éµå¾ª Claude Code åŸç”Ÿè§„èŒƒï¼Œå‡å°‘å­¦ä¹ æˆæœ¬ | - |
| âŒ **å¤š AI å·¥å…·åŒæ—¶å†™å…¥** | å¹¶å‘æ§åˆ¶å¤æ‚ï¼ŒPhase 2 èšç„¦å•å·¥å…·åœºæ™¯ | Phase 4 |
| âŒ **Git å†²çªè‡ªåŠ¨è§£å†³** | å¤æ‚åœºæ™¯ç•™ç»™ç”¨æˆ·æ‰‹åŠ¨å¤„ç† | Phase 4 |
| âŒ **Elfiee å†…ç½® Agent å¯¹è¯ UI** | æœ¬é˜¶æ®µé€šè¿‡å¤–éƒ¨å·¥å…·ï¼ˆClaude Codeï¼‰äº¤äº’ | Phase 3 |
| âŒ **ä¼šè¯å†…å®¹æ‘˜è¦** | åŸå§‹è®°å½•ä¼˜å…ˆï¼Œæ‘˜è¦åŠŸèƒ½æ¨è¿Ÿ | Phase 3 |

---

## ä¸ƒã€ä¸æ•´ä½“è·¯çº¿å›¾çš„å…³ç³»

| é˜¶æ®µ | æ ¸å¿ƒéªŒè¯ | ä¾èµ–/é“ºå« |
| :--- | :--- | :--- |
| Phase 1 âœ… | äººç±»åä½œåŸºç¡€ | Event Sourcingã€CBACã€Directoryã€Relation |
| **Phase 2** | **AI å·¥å…·é›†æˆï¼ˆSkills + Session + Gitï¼‰** | **æœ¬é˜¶æ®µæ ¸å¿ƒ** |
| Phase 3 | Agent æ¨¡å— + Relation å¢å¼º | Phase 2 çš„ CLI + ä¼šè¯åŒæ­¥åŸºç¡€ |
| Phase 4 | å¤šå·¥å…·åä½œ + æƒé™ UI | Phase 3 çš„ Agent æ¨¡å— |
| Phase 5 | å›¢é˜Ÿåä½œ | Phase 2 çš„ Git é›†æˆ |
| Phase 6 | æœåŠ¡ç«¯éƒ¨ç½² | åŸºäº Phase 2-5 çš„æ‰€æœ‰èƒ½åŠ› |
