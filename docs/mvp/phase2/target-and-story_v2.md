# Phase 2 äºŒé˜¶æ®µç›®æ ‡ä¸ç”¨æˆ·æ•…äº‹ï¼ˆv2ï¼‰

## ä¸€ã€Phase 1 å›é¡¾

### 1.1 é˜¶æ®µæˆæœ

Phase 1 èšç„¦"ç»Ÿä¸€å·¥ä½œé¢"å’Œ"å†³ç­–èµ„äº§åŒ–"çš„åŸºç¡€èƒ½åŠ›éªŒè¯ï¼Œåœ¨**å•äººå•æœºå¤šè§’è‰²åä½œ**åœºæ™¯ä¸‹å®Œæˆäº†ä»¥ä¸‹å·¥ä½œï¼š

**ç ”å‘æˆæœ**ï¼š
- âœ… Dashboard é¡µé¢ï¼š.elf æ–‡ä»¶çš„åˆ›å»ºã€å¯¼å…¥ã€é‡å‘½åã€åˆ é™¤å’Œå±•ç¤º
- âœ… Editor é¡µé¢æ ¸å¿ƒæ¨¡å—ï¼š
  - Directory æ¨¡å—ï¼šå†…éƒ¨/å¤–éƒ¨ç›®å½•ç®¡ç†ã€æ–‡ä»¶å¯¼å…¥å¯¼å‡º
  - Markdown ç¼–è¾‘ï¼šMyst è¯­æ³•æ”¯æŒã€æ–‡å­—ä¸ä»£ç å—åŒºåˆ†
  - åä½œè€…ä¸æƒé™ï¼šCBAC æƒé™æ¨¡å‹ã€åä½œè€…å¢åˆ å’Œæƒé™ç®¡ç†
  - Event è®°å½•ä¸å›æº¯ï¼šåŸºäºå‘é‡æ—¶é’Ÿçš„äº‹ä»¶æ’åºã€Timeline å¯è§†åŒ–ã€çŠ¶æ€å›æº¯
- âœ… æ ¸å¿ƒæ¶æ„ï¼šEvent Sourcingã€Block-based data structureã€Capability-based Architecture
- âœ… 25 ä¸ª Capabilityï¼Œ84% API åŒ–å®Œæˆ

**äº§å“æˆæœ**ï¼š
- âœ… ç«å“åˆ†æï¼šå¯¹æ¯”å¤§å‚å·¥ä½œæµã€Google å·¥ä½œæµã€Vibe Coding å·¥ä½œæµ
- âœ… ç”¨æˆ·å®éªŒï¼šè®°å½•è¡Œä¸ºçš„ Effort vs Valueã€ä¸åŒè®°å½•å½¢å¼çš„ Benefit å¯¹æ¯”

**æ ¸å¿ƒå‘ç°**ï¼š
- å•çº¯çš„ Log æ˜¯æ— æ•ˆçš„ï¼šä¿¡æ¯å¯†åº¦å¤ªä½ï¼Œå¢åŠ é˜…è¯»è´Ÿæ‹…
- Summary æ˜¯æ–¹å‘ï¼šä½†å¿…é¡»å¯è¿½æº¯ï¼Œä¸èƒ½æ˜¯é»‘ç›’
- **å†³ç­–èµ„äº§åŒ–çš„ä»·å€¼ä¸åœ¨äºç»™äººè¯»ï¼Œè€Œåœ¨äºè®© AI å­¦**

---

## äºŒã€Phase 1 çš„ Gap ä¸ Phase 2 æ–¹å‘æ”¶æŸ

### 2.1 Phase 1 çš„æ ¸å¿ƒ Gap

ä»"è®©å†³ç­–å¯å­¦ä¹ "çš„äº§å“å‘½é¢˜å‡ºå‘ï¼ŒPhase 1 å®Œæˆäº†**æŠŠå„é˜¶æ®µå†³ç­–è®°å½•ä¸‹æ¥**çš„åŸºç¡€éªŒè¯ï¼Œä½†è·ç¦»**è®© AI å·¥å…·æ— ç¼æ¥å…¥**ä»æœ‰æ˜¾è‘—å·®è·ï¼š

| Gap | æè¿° | ä¸ç†æƒ³çŠ¶æ€çš„å·®è· |
| :--- | :--- | :--- |
| **AI æœªæ¥å…¥** | å½“å‰ç³»ç»Ÿåªæœ‰"äººç±»è§’è‰²"ï¼Œæ²¡æœ‰ AI Agent å‚ä¸åä½œ | æ— æ³•éªŒè¯ **AI åŸç”Ÿç¼–è¾‘å™¨**çš„æ ¸å¿ƒå®šä½ |
| **å·¥å…·å‰²è£‚** | å¦‚æœå†…ç½® Agentï¼Œç”¨æˆ·éœ€è¦æ”¾å¼ƒæˆç†Ÿçš„ Claude Code/Cursor | ç”¨æˆ·è¢«è¿«é€‰æ‹©ï¼šç”¨å¼±å·¥å…·ä½†æœ‰è®°å½• vs ç”¨å¼ºå·¥å…·ä½†æ— è®°å½• |
| **é›†æˆç¼ºå¤±** | AI å·¥å…·çš„æ“ä½œä¸ä¼šè‡ªåŠ¨åŒæ­¥åˆ° Elfiee çš„ Event Store | å†³ç­–è®°å½•ä¸å®Œæ•´ï¼Œæ— æ³•è¿½æº¯ AI çš„æ€è€ƒè¿‡ç¨‹ |
| **ç‰ˆæœ¬æ§åˆ¶æ–­å±‚** | Elfiee å†…éƒ¨ Event ä¸ Git å¤–éƒ¨ Commit ç›¸äº’ç‹¬ç«‹ | æ— æ³•å»ºç«‹"å†…éƒ¨å†³ç­– â†’ å¤–éƒ¨å˜æ›´"çš„æ˜ å°„ |

### 2.2 Phase 1 å®éªŒçš„å…³é”®æ´å¯Ÿ

**äº§å“å±‚é¢**ï¼š
- âŒ **ä¸æˆç«‹çš„å‡è®¾**: "ç”¨æˆ·æ„¿æ„æ”¾å¼ƒæˆç†Ÿå·¥å…·æ¥ä½¿ç”¨ Elfiee å†…ç½® Agent"
- âœ… **æˆç«‹çš„å‡è®¾**: "ç”¨æˆ·æ„¿æ„è®© AI å·¥å…·é€šè¿‡ API æ“ä½œ Elfieeï¼Œåªè¦ä¸å½±å“åŸæœ‰å·¥ä½œæµ"
- ğŸ¯ **æ ¸å¿ƒè½¬å‘**: **Elfiee ä¸æ˜¯ AI å·¥å…·çš„æ›¿ä»£å“ï¼Œè€Œæ˜¯ AI å·¥å…·çš„"å†³ç­–è®°å¿†å±‚"**

**ç ”å‘å±‚é¢**ï¼š
- Event Sourcing æ¶æ„æˆç†Ÿï¼šå¯ä½œä¸º AI æ“ä½œçš„æŒä¹…åŒ–å±‚
- Capability ç³»ç»Ÿå®Œå–„ï¼šå¯æš´éœ²ä¸º Claude Skills
- Vector Clock æœºåˆ¶ï¼šå¯ç”¨äº AI ä¼šè¯ä¸ä»£ç å˜æ›´çš„å…³è”
- Directory æ’ä»¶æˆç†Ÿï¼šæ”¯æŒæ–‡ä»¶å¯¼å…¥å¯¼å‡ºï¼Œå¯ä½œä¸º AI å·¥å…·çš„æ–‡ä»¶ç½‘å…³

### 2.3 Phase 2 æ–¹å‘æ”¶æŸ

åŸºäºä¸Šè¿° Gap å’Œæ´å¯Ÿï¼ŒPhase 2 èšç„¦ä»¥ä¸‹ä¸‰å¤§æ–¹å‘ï¼š

| æ–¹å‘ | æè¿° | å¯¹åº”æ¨¡å— |
| :--- | :--- | :--- |
| **Skills é›†æˆ** | å°† Elfiee Capability æš´éœ²ä¸º Claude Code Skills | Skills Generator |
| **ä¼šè¯åŒæ­¥** | è‡ªåŠ¨åŒæ­¥ Claude/Cursor ä¼šè¯åˆ° Elfiee Event Store | Session Sync |
| **å†…å¤–æ˜ å°„** | å»ºç«‹ Elfiee å†…éƒ¨ Event ä¸ Git Commit çš„åŒå‘æ˜ å°„ | Git Integration |

### 2.4 Elfiee åœ¨ Phase 2 çš„æ ¸å¿ƒå®šä½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Native Editor                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Claude Code  â”‚  â”‚   Cursor     â”‚  â”‚    Codex     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                 â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                      â–¼                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚   Elfiee CLI + Skills  â”‚ â† æœ¬åœ° CLI è°ƒç”¨         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                      â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Elfiee Event Store                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Blocks  â”‚  â”‚ Events  â”‚  â”‚Relationsâ”‚  â”‚ Grants  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚    Git Integration     â”‚ â† å†…å¤–æ˜ å°„              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
1. **ä¸æ›¿ä»£ï¼Œè€Œæ˜¯å¢å¼º**ï¼šç”¨æˆ·ç»§ç»­ä½¿ç”¨ Claude Code/Cursorï¼ŒElfiee åœ¨åå°è®°å½•
2. **æƒé™ç½‘å…³**ï¼šAI åªèƒ½é€šè¿‡ Elfiee CLI æ“ä½œæ–‡ä»¶ï¼ŒCBAC æ§åˆ¶æƒé™è¾¹ç•Œ
3. **å†³ç­–è¿½æº¯**ï¼šAI ä¼šè¯ + ä»£ç å˜æ›´ + æµ‹è¯•ç»“æœï¼Œå®Œæ•´å› æœé“¾

---

## ä¸‰ã€Phase 2 é˜¶æ®µç›®æ ‡

### 3.1 å¤§ç›®æ ‡

**è®© Elfiee æˆä¸º AI å¼€å‘å·¥å…·çš„"å†³ç­–è®°å¿†å±‚"ï¼Œå®ç° AI ä¼šè¯ â†’ Event è®°å½• â†’ Git Commit çš„å®Œæ•´æ˜ å°„**

å…·ä½“éœ€è¦éªŒè¯ï¼š
1. âœ… Claude Code èƒ½é€šè¿‡ Skills è°ƒç”¨ Elfiee CLIï¼ˆcore.create, markdown.write ç­‰ï¼‰
2. âœ… AI ä¼šè¯è®°å½•èƒ½è‡ªåŠ¨åŒæ­¥åˆ° Elfieeï¼Œå¹¶ä¸ä»£ç å˜æ›´å»ºç«‹å…³è”
3. âœ… Elfiee å†…éƒ¨ Task èƒ½é©±åŠ¨å¤–éƒ¨ Git åˆ†æ”¯å’Œ Commit

### 3.2 å…³é”®å‡è®¾éªŒè¯

| å‡è®¾ | éªŒè¯æ–¹å¼ | æˆåŠŸæ ‡å‡† |
| :--- | :--- | :--- |
| **Skills å¯è¡Œæ€§** | Claude Code é€šè¿‡ SKILLS.md è°ƒç”¨ Elfiee CLI | æˆåŠŸæ‰§è¡Œ `core.create` ç­‰å‘½ä»¤ |
| **ä¼šè¯åŒæ­¥æœ‰æ•ˆ** | AI ä¼šè¯è‡ªåŠ¨æ˜ å°„ä¸º Elfiee Events | ä¼šè¯-ä»£ç å…³è”å‡†ç¡®ç‡ > 80% |
| **å†…å¤–æ˜ å°„æ¸…æ™°** | Task â†’ Branch, Taskå†…å®¹ â†’ Commit Message | ç”¨æˆ·æ— éœ€æ‰‹åŠ¨ç»´æŠ¤æ˜ å°„ |

### 3.3 æˆåŠŸæ ‡å‡†ä¸äº§å‡ºç‰©

#### 3.3.1 ç ”å‘ç›®æ ‡

**åŠŸèƒ½å®Œæˆç‡**ï¼š
- [ ] **æ ¸å¿ƒåŠŸèƒ½**ï¼šF1-F10 å…¨éƒ¨å®Œæˆï¼ˆ7 ä¸ª P0 + 3 ä¸ª P1ï¼‰
  - Skills æ¨¡å—ï¼šF1 Skills ç”Ÿæˆå™¨ (P0), F2 Symlink ç®¡ç† (P0), F3 CLI æ¥å£ (P0)
  - Session æ¨¡å—ï¼šF4 ä¼šè¯è§£æ (P0), F5 Event æ˜ å°„ (P0), F6 å…³ç³»å…³è” (P1)
  - Git æ¨¡å—ï¼šF7 å†…å¤–æ˜ å°„ (P0), F8 Hooks ç®¡ç† (P1), F9 å®Œæˆå½’æ¡£ (P1)
  - Agent æ¨¡å—ï¼šF10 Agent å…³è” (P0)

**é‡åŒ–æŒ‡æ ‡**ï¼š

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | éªŒè¯æ–¹å¼ |
| :--- | :--- | :--- |
| **Skills è°ƒç”¨æˆåŠŸç‡** | > 95% | Claude Code â†’ Elfiee CLI è°ƒç”¨ç»Ÿè®¡ |
| **ä¼šè¯åŒæ­¥è¦†ç›–ç‡** | > 90% | AI æ“ä½œè¢«è®°å½•ä¸º Event çš„æ¯”ä¾‹ |
| **å†…å¤–æ˜ å°„å‡†ç¡®ç‡** | 100% | Task-Branch-Commit å¯¹åº”å…³ç³» |
| **Dogfooding å®Œæˆåº¦** | ç”¨ Skills å®Œæˆ 1 ä¸ªçœŸå®åŠŸèƒ½ | PR åˆå¹¶ + Event å®Œæ•´æ€§ |

#### 3.3.2 äº§å“ç›®æ ‡

**Dogfooding å®éªŒ**ï¼š
- [ ] **å®éªŒè®¡åˆ’**ï¼šè®¾è®¡ Dogfooding æµç¨‹å’Œåœºæ™¯
- [ ] **è¯„ä»·æŒ‡æ ‡**ï¼šå®šä¹‰æ•ˆç‡ã€å®Œæ•´æ€§ã€å¯è¿½æº¯æ€§ç­‰æŒ‡æ ‡
- [ ] **å½’å› åˆ†æ**ï¼šåˆ†æå“ªäº›ç¯èŠ‚ææ•ˆã€å“ªäº›éœ€è¦ä¼˜åŒ–

---

## å››ã€Phase 2 å®Œæ•´ç”¨æˆ·æ•…äº‹ï¼ˆä¸²è”äº§å“ä¸ç ”å‘ï¼‰

### 4.1 æ•…äº‹èƒŒæ™¯

**è§’è‰²è®¾å®š**ï¼š
- **Developer**: ä½¿ç”¨ Claude Code è¿›è¡Œå¼€å‘
- **Elfiee**: åå°è¿è¡Œï¼Œè®°å½•å†³ç­–ï¼Œç®¡ç†æƒé™
- **Git**: å¤–éƒ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

**åœºæ™¯**: å¼€å‘è€…ä½¿ç”¨ Claude Code ä¸ºé¡¹ç›®æ·»åŠ "ç”¨æˆ·è®¤è¯"åŠŸèƒ½ï¼ŒElfiee åœ¨åå°è®°å½•æ•´ä¸ªè¿‡ç¨‹ã€‚

### 4.2 å®Œæ•´å·¥ä½œæµæ—¶åºå›¾

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant ELF as Elfiee
    participant CC as Claude Code
    participant Git as Git Repo

    Note over Dev,Git: === é˜¶æ®µ1: é¡¹ç›®åˆå§‹åŒ– ===
    Dev->>ELF: 1. åˆ›å»º/æ‰“å¼€ project.elf
    ELF->>ELF: è§£å‹ temp â†’ ç”Ÿæˆ root Directory Block
    ELF->>ELF: è‡ªåŠ¨åˆ›å»º .elf/ å…ƒæ•°æ®ç›®å½•ï¼ˆç½®é¡¶å±•ç¤ºï¼‰
    ELF->>ELF: å†…ç½®é€šç”¨ SKILLS.md æ¨¡æ¿

    Note over Dev,Git: === é˜¶æ®µ2: å¯¼å…¥ä»£ç ä»“åº“ ===
    Dev->>ELF: 2. directory.import(å¤–éƒ¨é¡¹ç›®è·¯å¾„)
    ELF->>ELF: åˆ›å»º projects/{project-name}/ ç›®å½•ç»“æ„
    ELF->>ELF: ç”Ÿæˆé¡¹ç›®çº§ SKILLS.md
    ELF->>ELF: å¤åˆ¶åŸ .git/hooks/ â†’ .elf/.git/hooks/
    ELF->>ELF: åœ¨å¤åˆ¶çš„ hooks ä¸­æ·»åŠ  Elfiee æ£€æŸ¥é€»è¾‘
    ELF->>Git: git config core.hooksPath .elf/.git/hooks/

    Note over Dev,Git: === é˜¶æ®µ3: å…³è” Agentï¼ˆå…ˆ Claude åè®¤è¯ï¼‰===
    Dev->>CC: 3. å¯åŠ¨ Claude Code
    CC->>CC: ç”Ÿæˆ session_id: "sess-abc123"
    Dev->>ELF: 4. åœ¨ Elfiee ä¸­"å…³è” Agent"
    ELF->>ELF: æ‰«æ ~/.claude/projects/ æ´»è·ƒ sessions
    ELF-->>Dev: æ˜¾ç¤ºå¯å…³è”çš„ session åˆ—è¡¨
    Dev->>ELF: é€‰æ‹© session "sess-abc123"
    ELF->>ELF: åˆ›å»º Agent Block
    ELF->>ELF: editor_id = "claude:sess-abc123"
    ELF->>ELF: ç”Ÿæˆ Agent çš„ SKILLS.mdï¼ˆé€šç”¨ + é¡¹ç›®çº§ï¼‰
    ELF-->>CC: symlink åˆ° ~/.claude/skills/

    Note over Dev,Git: === é˜¶æ®µ4: ä»»åŠ¡åˆ›å»ºï¼ˆä¸¤ç§æ–¹å¼ï¼‰===
    alt æ–¹å¼A: Claude Code å†…åˆ›å»º
        Dev->>CC: 5a. /new-task "æ·»åŠ ç”¨æˆ·è®¤è¯"
        CC->>ELF: CLI: elfiee --agent claude:sess-abc123 core.create task
        CC->>ELF: CLI: elfiee markdown.write {task_id} "å†…å®¹"
    else æ–¹å¼B: Elfiee å†…åˆ›å»º
        Dev->>ELF: 5b. åœ¨ Elfiee å†…æ–°å»º task.md
        Dev->>ELF: ç¼–è¾‘ä»»åŠ¡å†…å®¹
        Dev->>CC: è®© Claude è¯»å– task.md
    end
    ELF->>ELF: åˆ›å»º session/log-{timestamp}.md
    ELF->>ELF: core.link(session-log â†’ task.md)

    Note over Dev,Git: === é˜¶æ®µ5: AI å¼€å‘è¿‡ç¨‹ ===
    loop æ¯æ¬¡ Claude å“åº”å®Œæˆ
        CC->>ELF: CLI: elfiee code.write / markdown.write / ...
        ELF->>ELF: è®°å½• Eventï¼ŒVector Clock++
        ELF->>ELF: åŒæ­¥ä¼šè¯å†…å®¹åˆ° session/log-xxx.md
        Note right of ELF: ä¿æŒé¡ºåºï¼šä¼šè¯ â†’ ä»£ç å˜æ›´
    end

    Note over Dev,Git: === é˜¶æ®µ6: å¯¼å‡ºä¸æäº¤ ===
    Dev->>ELF: 6. å¯¼å‡º (directory.export)
    ELF->>ELF: å†™å…¥ç‰©ç†æ–‡ä»¶
    ELF->>Git: åˆ›å»ºåˆ†æ”¯ (from task.md title)
    ELF->>Git: git commit (message from task.md)
    Git->>Git: CI/CD éªŒè¯

    Note over Dev,Git: === é˜¶æ®µ7: å®Œæˆä¸å½’æ¡£ ===
    Git-->>ELF: 7. PR åˆå¹¶ / æœ¬åœ° merge æ£€æµ‹
    ELF->>ELF: è‡ªåŠ¨åˆ›å»ºå½’æ¡£æ–‡æ¡£ (summary-{task}.md)
    ELF->>ELF: æ±‡æ€»ï¼šå¯¹è¯ Events + ç¼–è¾‘ Eventsï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰
    ELF->>Git: git config --unset core.hooksPathï¼ˆå…³é—­æ—¶æ¢å¤ï¼‰

    Note over Dev,Git: === é˜¶æ®µ8: SKILLS æ›´æ–° ===
    opt å¦‚æœç”Ÿæˆäº†æ–°åŠŸèƒ½
        ELF->>ELF: 8. æ›´æ–° projects/{project}/SKILLS.md
        Note right of ELF: Dogfooding: æ‰‹åŠ¨æ›´æ–°é€šç”¨ SKILLS
    end
```

### 4.3 è¯¦ç»†æ­¥éª¤

#### Step 1: åˆ›å»º/æ‰“å¼€ .elf é¡¹ç›®

**æ“ä½œ**ï¼šç”¨æˆ·åˆ›å»ºæˆ–æ‰“å¼€ `project.elf` æ–‡ä»¶

**ç³»ç»Ÿè¡Œä¸º**ï¼š
1. è§£å‹ .elf åˆ°ä¸´æ—¶ç›®å½•
2. ç”Ÿæˆæ ¹ Directory Blockï¼Œå±•ç¤ºè§£å‹å†…å®¹
3. è‡ªåŠ¨åˆ›å»º `.elf/` å…ƒæ•°æ®ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼š
   ```
   .elf/
   â”œâ”€â”€ SKILLS.md            # é€šç”¨ Skillsï¼ˆå†…ç½®æ¨¡æ¿ï¼‰
   â”œâ”€â”€ projects/            # é¡¹ç›®çº§é…ç½®
   â””â”€â”€ git/                 # Git é›†æˆé…ç½®
       â””â”€â”€ hooks/           # Hooks ç›®å½•
   ```
4. `.elf/` ç›®å½•åœ¨ UI ä¸­ç½®é¡¶å±•ç¤ºï¼Œä¸æ™®é€šå†…å®¹åŒºåˆ†
5. å†…ç½®é€šç”¨ SKILLS.md æ¨¡æ¿ï¼š
   ```markdown
   # Elfiee é€šç”¨ Skills

   ä½¿ç”¨ Elfiee CLI æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

   ## core.create
   åˆ›å»ºæ–° Block
   - å‘½ä»¤: `elfiee --agent {agent_id} core.create {block_type}`
   - ç¤ºä¾‹: `elfiee --agent claude:sess-abc core.create markdown`

   ## markdown.write
   å†™å…¥ Markdown å†…å®¹
   - å‘½ä»¤: `elfiee --agent {agent_id} markdown.write {block_id} "å†…å®¹"`

   ## code.write
   å†™å…¥ä»£ç å†…å®¹
   - å‘½ä»¤: `elfiee --agent {agent_id} code.write {block_id} "å†…å®¹"`

   ## core.link
   å»ºç«‹ Block å…³ç³»
   - å‘½ä»¤: `elfiee --agent {agent_id} core.link {source_id} {target_id} {relation}`
   ```

**éªŒè¯ç‚¹**ï¼šæ¯ä¸ªæ–°å»ºçš„ .elf æ–‡ä»¶éƒ½è‡ªåŠ¨åŒ…å«é€šç”¨ SKILLS.md

---

#### Step 2: å¯¼å…¥ä»£ç ä»“åº“

**æ“ä½œ**ï¼šç”¨æˆ·æ‰§è¡Œ `directory.import` å¯¼å…¥å¤–éƒ¨é¡¹ç›®

**ç³»ç»Ÿè¡Œä¸º**ï¼š
1. æ‰«ææºç›®å½•ï¼Œè¿‡æ»¤äºŒè¿›åˆ¶æ–‡ä»¶
2. åˆ›å»º Directory Blockï¼Œè®°å½• `external_root_path`
3. åœ¨ `.elf/projects/` ä¸‹åˆ›å»ºé¡¹ç›®çº§ç›®å½•ï¼š
   ```
   .elf/projects/{project-name}/
   â”œâ”€â”€ SKILLS.md      # é¡¹ç›®çº§ Skillsï¼ˆå·¥ä½œæµã€è§„èŒƒï¼‰
   â””â”€â”€ CLAUDE.md      # é¡¹ç›®çº§ Claude é…ç½®
   ```
4. **Git Hooks å¤„ç†**ï¼š
   - å¤åˆ¶åŸé¡¹ç›® `.git/hooks/` çš„æ‰€æœ‰æ–‡ä»¶åˆ° `.elf/git/hooks/`
   - åœ¨å¤åˆ¶çš„ hooks ä¸­**è¿½åŠ ** Elfiee çš„æ£€æŸ¥é€»è¾‘
   - è®¾ç½® `git config core.hooksPath .elf/git/hooks/`

**å¤åˆ¶åçš„ pre-commit ç¤ºä¾‹**ï¼š
```bash
#!/bin/bash
# === åŸæœ‰ hooks å†…å®¹ï¼ˆå¤åˆ¶è‡ª .git/hooks/pre-commitï¼‰===
# ... åŸæœ‰é€»è¾‘ ...

# === Elfiee è¿½åŠ çš„æ£€æŸ¥é€»è¾‘ ===
if command -v elfiee &> /dev/null; then
    elfiee check-commit "$@"
fi
```

**SKILLS å±‚çº§è®¾è®¡**ï¼š
- **é€šç”¨ SKILLS**ï¼ˆ`.elf/SKILLS.md`ï¼‰ï¼šElfiee ç¼–è¾‘æŒ‡ä»¤ï¼ˆcore.create, markdown.write ç­‰ï¼‰
- **é¡¹ç›®çº§ SKILLS**ï¼ˆ`.elf/projects/{name}/SKILLS.md`ï¼‰ï¼šè¯¥é¡¹ç›®çš„ä»£ç å·¥ä½œæµã€å¼€å‘è§„èŒƒç­‰

---

#### Step 3: å…³è” Agentï¼ˆå…ˆå‘èµ· Claudeï¼Œå†è®¤è¯ï¼‰

**æ“ä½œ**ï¼šç”¨æˆ·å¯åŠ¨ Claude Codeï¼Œç„¶ååœ¨ Elfiee ä¸­å…³è”

**å·¥ä½œæµ**ï¼š
1. ç”¨æˆ·å¯åŠ¨ Claude Code
2. Claude ç”Ÿæˆ session_idï¼ˆå¦‚ `sess-abc123`ï¼‰
3. ç”¨æˆ·åœ¨ Elfiee ä¸­ç‚¹å‡»"å…³è” Agent"
4. Elfiee æ‰«æ `~/.claude/projects/` ä¸‹çš„æ´»è·ƒ sessions
5. ç”¨æˆ·é€‰æ‹©è¦å…³è”çš„ session
6. Elfiee åˆ›å»º Agent Blockï¼š
   ```
   blocks/agent-{uuid}/
   â”œâ”€â”€ config.json
   â”‚   {
   â”‚     "provider": "claude",
   â”‚     "session_id": "sess-abc123",
   â”‚     "editor_id": "claude:sess-abc123"
   â”‚   }
   â”œâ”€â”€ SKILLS.md         # åˆå¹¶åçš„ Skillsï¼ˆé€šç”¨ + é¡¹ç›®çº§ï¼‰
   â””â”€â”€ hooks/            # Agent ç‰¹å®šçš„ hooks
   ```
7. åˆ›å»º symlinkï¼š`~/.claude/skills/elfiee-{project} â†’ agent-{uuid}/SKILLS.md`

**èº«ä»½å”¯ä¸€æ€§ä¿è¯**ï¼š
- æ¯ä¸ª Claude session æœ‰å”¯ä¸€çš„ session_id
- editor_id = `{provider}:{session_id}`
- ä¸åŒ AI å·¥å…·ã€ä¸åŒä¼šè¯çš„ editor_id å®Œå…¨ä¸åŒ
- Claude `sess-abc123` â†’ `claude:sess-abc123`
- Codex `codex-xyz789` â†’ `codex:codex-xyz789`

**éªŒè¯ç‚¹**ï¼šå¿…é¡»å…ˆå¯åŠ¨ AI å·¥å…·è·å– session_idï¼Œå†åœ¨ Elfiee ä¸­å…³è”

---

#### Step 4: ä»»åŠ¡åˆ›å»ºï¼ˆä¸¤ç§æ–¹å¼ï¼‰

**æ–¹å¼ Aï¼šåœ¨ Claude Code ä¸­åˆ›å»º**

ç”¨æˆ·è¾“å…¥ï¼š`/new-task "æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½"`

Claude æ‰§è¡Œçš„å‘½ä»¤åºåˆ—ï¼ˆé€šè¿‡ Bash è°ƒç”¨ Elfiee CLIï¼‰ï¼š
```bash
# 1. åˆ›å»ºä»»åŠ¡ Block
elfiee --agent claude:sess-abc123 core.create task
# è¿”å›: {"block_id": "task-001"}

# 2. å†™å…¥ä»»åŠ¡å†…å®¹
elfiee --agent claude:sess-abc123 markdown.write task-001 "# æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½\n\n## éœ€æ±‚\n..."

# 3. å…³è”åˆ° session log
elfiee --agent claude:sess-abc123 core.link task-001 session-log-001 tracks
```

**æ–¹å¼ Bï¼šåœ¨ Elfiee ä¸­åˆ›å»º**

1. ç”¨æˆ·åœ¨ Elfiee å†…æ–°å»º `task.md`
2. ç¼–è¾‘ä»»åŠ¡å†…å®¹ï¼ˆéœ€æ±‚ã€éªŒæ”¶æ ‡å‡†ç­‰ï¼‰
3. åœ¨ Claude Code ä¸­è¾“å…¥ï¼š`è¯·è¯»å–å¹¶æ‰§è¡Œ task.md` æˆ–é€šè¿‡ @ å¼•ç”¨
4. Claude è¯»å–ä»»åŠ¡å†…å®¹ï¼Œå¼€å§‹æ‰§è¡Œ

**ä¼šè¯å…³è”**ï¼š
- ä»»åŠ¡åˆ›å»ºæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»º `session/log-{timestamp}.md`
- å»ºç«‹ relationï¼š`session-log â†’ task.md (tracks)`
- åŒé‡æ ¡éªŒï¼š
  1. task.md æ˜¯å¦ä¸ºæ–°ä»»åŠ¡ï¼ˆæ— å…³è”çš„ sessionï¼‰
  2. Claude æ˜¯å¦ä¸ºæ–° sessionï¼ˆæ— å…³è”çš„ taskï¼‰

---

#### Step 5: AI å¼€å‘è¿‡ç¨‹ä¸ä¼šè¯åŒæ­¥

**å¼€å‘è¿‡ç¨‹**ï¼šClaude é€šè¿‡ CLI æ‰§è¡Œæ“ä½œ

```bash
[14:32:01] elfiee --agent claude:sess-abc123 markdown.write design-doc "è®¾è®¡æ–‡æ¡£..."
           â†’ Event{editor_id: "claude:sess-abc123", vc: {"claude:sess-abc123": 1}}

[14:32:15] elfiee --agent claude:sess-abc123 code.write auth-rs "fn authenticate()..."
           â†’ Event{editor_id: "claude:sess-abc123", vc: {"claude:sess-abc123": 2}}

[14:33:42] elfiee --agent claude:sess-abc123 core.link auth-rs task-001 implements
           â†’ Event{editor_id: "claude:sess-abc123", vc: {"claude:sess-abc123": 3}}
```

**ä¼šè¯åŒæ­¥æœºåˆ¶**ï¼š

æ¯æ¬¡ Claude å“åº”å®Œæˆï¼ˆç”¨æˆ·åœæ­¢è¾“å…¥ï¼ŒClaude å®Œæ•´å›å¤ï¼‰ï¼Œè§¦å‘åŒæ­¥ï¼š

1. Elfiee ç›‘å¬ `~/.claude/projects/{path}/{session}.jsonl` æ–‡ä»¶å˜åŒ–
2. è§£ææ–°å¢çš„ä¼šè¯å†…å®¹
3. å†™å…¥ `session/log-xxx.md`
4. **ä¿æŒæ—¶åº**ï¼šä¼šè¯å†…å®¹çš„ Event åœ¨ä»£ç å˜æ›´çš„ Event ä¹‹å‰
   ```
   Event é¡ºåºï¼š
   1. markdown.write(session/log-xxx.md, "ç”¨æˆ·: æ·»åŠ è®¤è¯...")  vc: {1}
   2. code.write(auth.rs, "fn authenticate()...")              vc: {2}
   3. core.link(auth.rs â†’ task.md)                             vc: {3}
   ```

**Vector Clock åŒ¹é…**ï¼šé€šè¿‡ vc å€¼å»ºç«‹ä¼šè¯-ä»£ç çš„ç²¾ç¡®å…³è”

---

#### Step 6: å¯¼å‡ºä¸ Git æäº¤

**æ“ä½œ**ï¼šç”¨æˆ·æ‰§è¡Œå¯¼å‡º

**ç³»ç»Ÿè¡Œä¸º**ï¼š
1. `directory.export` â†’ å°† Blocks å†™å…¥ç‰©ç†æ–‡ä»¶
2. ä» task.md æå–ä¿¡æ¯ï¼š
   - `title` â†’ åˆ†æ”¯åï¼ˆå¦‚ `feat/user-auth`ï¼‰
   - `content` â†’ commit message
3. æ‰§è¡Œ Git æ“ä½œï¼š
   ```bash
   git checkout -b feat/user-auth
   git add <exported_files>
   git commit -m "æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½\n\n..."
   git push origin feat/user-auth  # å¯é€‰
   ```
4. Git Hooks è‡ªåŠ¨ç”Ÿæ•ˆï¼ˆå› ä¸º `core.hooksPath` å·²è®¾ç½®ï¼‰

---

#### Step 7: å®Œæˆå½’æ¡£ï¼ˆè‡ªåŠ¨è§¦å‘ï¼‰

**è§¦å‘æ¡ä»¶**ï¼š
- æœ¬åœ°æ£€æµ‹åˆ° mergeï¼ˆgit reflog ç›‘å¬ï¼‰
- æˆ–è¿œç¨‹ PR åˆå¹¶ï¼ˆGitHub webhook / å®šæœŸè½®è¯¢ï¼‰

**ç³»ç»Ÿè¡Œä¸º**ï¼š
1. è‡ªåŠ¨åˆ›å»ºå½’æ¡£æ–‡æ¡£ï¼š`archive/summary-{task-name}-{date}.md`
2. æ±‡æ€»å†…å®¹ï¼ˆæŒ‰ Event æ—¶é—´é¡ºåºï¼‰ï¼š
   ```markdown
   # ä»»åŠ¡å½’æ¡£ï¼šæ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½

   ## æ—¶é—´çº¿

   ### 14:32:01 - ä¼šè¯å¼€å§‹
   ::::{note} å¯¹è¯è®°å½•
   ç”¨æˆ·ï¼šæ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼Œè¦æ±‚æ”¯æŒ JWT...
   Claudeï¼šå¥½çš„ï¼Œæˆ‘æ¥åˆ†æéœ€æ±‚...
   ::::

   ### 14:32:15 - ä»£ç åˆ›å»º
   ::::{code-block} rust
   :caption: auth.rs
   fn authenticate() { ... }
   ::::

   ### 14:33:42 - å…³ç³»å»ºç«‹
   - auth.rs â†’ task.md (implements)

   ## ç›¸å…³èµ„æº
   - åŸå§‹ä»»åŠ¡ï¼š[[task.md]]
   - ä»£ç æ–‡ä»¶ï¼š[[auth.rs]]
   - ä¼šè¯è®°å½•ï¼š[[session/log-xxx.md]]
   ```
3. ä½¿ç”¨ Myst è¯­æ³•ï¼Œæ”¯æŒ Elfiee å†…æ¸²æŸ“

---

#### Step 8: é¡¹ç›®å…³é—­ä¸ Hooks æ¢å¤

**æ“ä½œ**ï¼šç”¨æˆ·å…³é—­ Elfiee æˆ–å…³é—­é¡¹ç›®

**ç³»ç»Ÿè¡Œä¸º**ï¼š
1. æ‰§è¡Œ `git config --unset core.hooksPath`
2. Git æ¢å¤ä½¿ç”¨åŸå§‹çš„ `.git/hooks/` ç›®å½•
3. åŸé¡¹ç›®çš„ `.git/hooks/` å®Œå…¨ä¸å˜ï¼Œæ­£å¸¸æäº¤ä¸å—å½±å“

---

#### Step 9: SKILLS æ›´æ–°ï¼ˆå¯é€‰ï¼‰

**è§¦å‘æ¡ä»¶**ï¼šä»»åŠ¡æ¶‰åŠæ–°åŠŸèƒ½/æ–°è§„èŒƒ

**Dogfooding åœºæ™¯**ï¼š
- è‡ªåŠ¨æ›´æ–°ï¼š`.elf/projects/{project}/SKILLS.md`ï¼ˆé¡¹ç›®çº§ï¼‰
- æ‰‹åŠ¨æ›´æ–°ï¼šé€šç”¨ SKILLSï¼ˆéœ€è¦äººå·¥å®¡æ ¸ï¼‰

**æ›´æ–°å†…å®¹ç¤ºä¾‹**ï¼š
```markdown
## æ–°å¢èƒ½åŠ›

### auth.validate
éªŒè¯ç”¨æˆ·èº«ä»½
- å‘½ä»¤: `elfiee --agent {agent_id} auth.validate {token}`
- ç¤ºä¾‹: `elfiee --agent claude:sess-abc auth.validate "eyJhbG..."`
```

---

## äº”ã€Phase 2 æ‹†åˆ† User Stories

### 5.1 ç ”å‘åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼ˆ10 ä¸ªç”¨æˆ·æ•…äº‹ï¼‰

#### A. Skills æ¨¡å—ï¼ˆ3 ä¸ªï¼‰

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- | :--- |
| **F1** | Skills ç”Ÿæˆå™¨ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦å°† Elfiee Capabilities å¯¼å‡ºä¸º Claude Code Skills æ ¼å¼ | âœ“ å†…ç½®é€šç”¨ SKILLS.md æ¨¡æ¿ <br> âœ“ ç”Ÿæˆé¡¹ç›®çº§ SKILLS.mdï¼ˆå·¥ä½œæµè§„èŒƒï¼‰ <br> âœ“ æ”¯æŒåˆå¹¶è¾“å‡ºåˆ° Agent Block | P0 |
| **F2** | Symlink ç®¡ç† | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee è‡ªåŠ¨å°† Skills é“¾æ¥åˆ° Claude Code ç›®å½• | âœ“ åˆ›å»º symlink åˆ° Agent çš„ SKILLS.md <br> âœ“ æ”¯æŒå¤šé¡¹ç›®åˆ‡æ¢ <br> âœ“ å…³é—­æ—¶æ¸…ç† symlink | P0 |
| **F3** | CLI æ¥å£ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦æä¾› CLI ä¾› Claude Code è°ƒç”¨ | âœ“ `elfiee --agent {id} {capability} {args}` <br> âœ“ CLI é€šè¿‡ IPC ä¸è¿è¡Œä¸­çš„ Elfiee é€šä¿¡ <br> âœ“ æ”¯æŒ JSON è¾“å‡º | P0 |

#### B. Session æ¨¡å—ï¼ˆ3 ä¸ªï¼‰

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- | :--- |
| **F4** | ä¼šè¯è§£æå™¨ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦è§£æ Claude Code çš„ä¼šè¯å†å²æ–‡ä»¶ | âœ“ ç›‘å¬ Claude JSONL æ–‡ä»¶å˜åŒ– <br> âœ“ æå–æ–°å¢ä¼šè¯å†…å®¹ <br> âœ“ æ¯æ¬¡å“åº”å®Œæˆæ—¶è§¦å‘åŒæ­¥ | P0 |
| **F5** | Event æ˜ å°„ | ä½œä¸ºç³»ç»Ÿï¼Œæˆ‘éœ€è¦å°†ä¼šè¯å†…å®¹æ˜ å°„ä¸º Elfiee Events | âœ“ ä¼šè¯å†…å®¹å†™å…¥ session/log-xxx.md <br> âœ“ ä¿æŒæ—¶åºï¼šä¼šè¯ Event åœ¨ä»£ç  Event ä¹‹å‰ <br> âœ“ Vector Clock æ­£ç¡®é€’å¢ | P0 |
| **F6** | å…³ç³»å…³è” | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ° AI ä¼šè¯ä¸ä»£ç å˜æ›´çš„å…³è” | âœ“ session-log è‡ªåŠ¨å…³è” task.md <br> âœ“ é€šè¿‡ Vector Clock åŒ¹é…ä¼šè¯å’Œä»£ç  <br> âœ“ å»ºç«‹ relation (generated_by) | P1 |

#### C. Git æ¨¡å—ï¼ˆ3 ä¸ªï¼‰

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- | :--- |
| **F7** | å†…å¤–æ˜ å°„ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› task.md é©±åŠ¨ Git åˆ†æ”¯å’Œ Commit | âœ“ task title â†’ åˆ†æ”¯å <br> âœ“ task content â†’ commit message <br> âœ“ ä¸€é”®"å¯¼å‡º + Commit" | P0 |
| **F8** | Hooks ç®¡ç† | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ› Elfiee ç®¡ç† Git Hooks ä½†ä¸æ±¡æŸ“åŸé¡¹ç›® | âœ“ å¯¼å…¥æ—¶å¤åˆ¶åŸ hooks åˆ° .elf/git/hooks/ <br> âœ“ åœ¨å¤åˆ¶çš„ hooks ä¸­è¿½åŠ  Elfiee é€»è¾‘ <br> âœ“ é€šè¿‡ core.hooksPath åˆ‡æ¢ <br> âœ“ å…³é—­æ—¶æ¢å¤åŸé…ç½® | P1 |
| **F9** | å®Œæˆå½’æ¡£ | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›ä»»åŠ¡å®Œæˆåè‡ªåŠ¨ç”Ÿæˆå½’æ¡£æ–‡æ¡£ | âœ“ æ£€æµ‹ mergeï¼ˆæœ¬åœ°/è¿œç¨‹ PRï¼‰ <br> âœ“ è‡ªåŠ¨åˆ›å»º summary markdown <br> âœ“ æŒ‰æ—¶é—´é¡ºåºæ±‡æ€»å¯¹è¯+ç¼–è¾‘ Events <br> âœ“ ä½¿ç”¨ Myst è¯­æ³• | P1 |

#### D. Agent æ¨¡å—ï¼ˆ1 ä¸ªï¼‰

| ç¼–å· | åŠŸèƒ½åç§° | ç”¨æˆ·æ•…äº‹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- | :--- |
| **F10** | Agent å…³è” | ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›å°† Claude session å…³è”ä¸º Elfiee Agent | âœ“ æ‰«æ ~/.claude/projects/ æ´»è·ƒ sessions <br> âœ“ ç”¨æˆ·é€‰æ‹© session è¿›è¡Œå…³è” <br> âœ“ åˆ›å»º Agent Blockï¼Œeditor_id = {provider}:{session_id} <br> âœ“ åˆå¹¶ç”Ÿæˆ Agent çš„ SKILLS.md | P0 |

### 5.2 äº§å“ç ”ç©¶æ‹†åˆ†

| ç¼–å· | ç ”ç©¶ä¸»é¢˜ | ç ”ç©¶é—®é¢˜ | äº§å‡ºç‰© | ä¼˜å…ˆçº§ |
| :--- | :--- | :--- | :--- | :--- |
| **R1** | Dogfooding å®éªŒè®¾è®¡ | å¦‚ä½•è®¾è®¡æœ‰æ•ˆçš„ Dogfooding æµç¨‹ï¼Ÿéœ€è¦å“ªäº›åœºæ™¯è¦†ç›–ï¼Ÿ | å®éªŒè®¡åˆ’æ–‡æ¡£ + åœºæ™¯æ¸…å• | P0 |
| **R2** | è¯„ä»·æŒ‡æ ‡å®šä¹‰ | å¦‚ä½•é‡åŒ– Skills é›†æˆçš„æ•ˆæœï¼Ÿæ•ˆç‡ã€å®Œæ•´æ€§ã€å¯è¿½æº¯æ€§å¦‚ä½•è¡¡é‡ï¼Ÿ | æŒ‡æ ‡ä½“ç³» + æ•°æ®é‡‡é›†æ–¹æ¡ˆ | P0 |
| **R3** | å½’å› åˆ†ææ–¹æ³• | å“ªäº›ç¯èŠ‚ææ•ˆäº†ï¼Ÿå“ªäº›æ˜¯ç“¶é¢ˆï¼Ÿå¦‚ä½•å½’å› ï¼Ÿ | åˆ†ææ¡†æ¶ + å½’å› æŠ¥å‘Šæ¨¡æ¿ | P0 |

---

## å…­ã€Phase 2 ä¸åšä»€ä¹ˆï¼ˆè¾¹ç•Œæ¸…æ™°ï¼‰

| ä¸åš | åŸå›  | æ¨è¿Ÿåˆ°é˜¶æ®µ |
| :--- | :--- | :--- |
| âŒ **HTTP ç½‘å…³** | æœ¬åœ°åº”ç”¨ä½¿ç”¨ CLI + IPC æ›´è½»é‡ | - |
| âŒ **å®Œå…¨è‡ªåŠ¨åŒæ­¥** | æ‰‹åŠ¨/è§¦å‘å¼åŒæ­¥æ›´å¯æ§ï¼Œé¿å…æ€§èƒ½é—®é¢˜ | Phase 3 |
| âŒ **è‡ªå®šä¹‰ Skills è¯­æ³•** | éµå¾ª Claude Code åŸç”Ÿè§„èŒƒï¼Œå‡å°‘å­¦ä¹ æˆæœ¬ | - |
| âŒ **å¤š AI å·¥å…·åŒæ—¶å†™å…¥** | å¹¶å‘æ§åˆ¶å¤æ‚ï¼ŒPhase 2 èšç„¦å•å·¥å…·åœºæ™¯ | Phase 4 |
| âŒ **Git å†²çªè‡ªåŠ¨è§£å†³** | å¤æ‚åœºæ™¯ç•™ç»™ç”¨æˆ·æ‰‹åŠ¨å¤„ç† | Phase 4 |
| âŒ **Elfiee å†…ç½® Agent å¯¹è¯ UI** | æœ¬é˜¶æ®µé€šè¿‡å¤–éƒ¨å·¥å…·ï¼ˆClaude Codeï¼‰äº¤äº’ | Phase 3 |
| âŒ **ä¼šè¯å†…å®¹æ‘˜è¦** | åŸå§‹è®°å½•ä¼˜å…ˆï¼Œæ‘˜è¦åŠŸèƒ½æ¨è¿Ÿ | Phase 3 |

---

## ä¸ƒã€ä¸æ•´ä½“è·¯çº¿å›¾çš„å…³ç³»

| é˜¶æ®µ | æ ¸å¿ƒéªŒè¯ | ä¾èµ–/é“ºå« |
| :--- | :--- | :--- |
| Phase 1 âœ… | äººç±»åä½œåŸºç¡€ | Event Sourcingã€CBACã€Directoryã€Relation |
| **Phase 2** | **AI å·¥å…·é›†æˆï¼ˆSkills + Session + Gitï¼‰** | **æœ¬é˜¶æ®µæ ¸å¿ƒ** |
| Phase 3 | Agent æ¨¡å— + Relation å¢å¼º | Phase 2 çš„ CLI + ä¼šè¯åŒæ­¥åŸºç¡€ |
| Phase 4 | å¤šå·¥å…·åä½œ + æƒé™ UI | Phase 3 çš„ Agent æ¨¡å— |
| Phase 5 | å›¢é˜Ÿåä½œ | Phase 2 çš„ Git é›†æˆ |
| Phase 6 | æœåŠ¡ç«¯éƒ¨ç½² | åŸºäº Phase 2-5 çš„æ‰€æœ‰èƒ½åŠ› |
