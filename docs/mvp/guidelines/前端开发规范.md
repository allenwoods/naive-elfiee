# Elfiee å‰ç«¯å¼€å‘è§„èŒƒ

> æœ¬æ–‡æ¡£é¢å‘ Elfiee é¡¹ç›®çš„å‰ç«¯å¼€å‘è€…ï¼ˆåŒ…æ‹¬ AI è¾…åŠ©å¼€å‘ï¼‰ï¼Œå®šä¹‰äº†å‰ç«¯å¼€å‘çš„æ ¸å¿ƒåŸåˆ™ã€æ¶æ„è§„èŒƒå’Œæœ€ä½³å®è·µã€‚

## ğŸ¯ æ ¸å¿ƒé‡ç‚¹ï¼ˆå¿…è¯»ï¼‰

### âš ï¸ ä¸‰å¤§ç¡¬æ€§è§„åˆ™

1. **ã€å¼ºåˆ¶ã€‘åªèƒ½é€šè¿‡ Zustand Actions æ“ä½œæ•°æ®**
   - âœ… `const writeBlock = useAppStore(s => s.writeBlock); await writeBlock(fileId, blockId, content);`
   - âŒ ç¦æ­¢ç»„ä»¶ç›´æ¥è°ƒç”¨ `TauriClient`ï¼ˆTauriClient åªåœ¨ Zustand Actions å†…éƒ¨ä½¿ç”¨ï¼‰

2. **ã€å¼ºåˆ¶ã€‘ç¦æ­¢æ‰‹åŠ¨ç¼–è¾‘ src/bindings.ts**
   - bindings.ts ç”± tauri-specta è‡ªåŠ¨ç”Ÿæˆ
   - åªèƒ½ä»ä¸­å¯¼å…¥**ç±»å‹** `import type { Block } from '@/bindings'`

3. **ã€å¼ºåˆ¶ã€‘ä¸è¦ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡**
   - âœ… `await writeBlock(fileId, blockId, 'new content')`ï¼ˆè°ƒç”¨ Zustand Actionï¼‰
   - âŒ `block.contents.markdown = 'new content'`ï¼ˆç›´æ¥ä¿®æ”¹å¯¹è±¡ï¼‰

### ğŸ“‹ å¿«é€ŸæŸ¥é˜…

```typescript
// âœ… ä» Zustand è¯»å–æ•°æ®
import { useAppStore } from '@/lib/app-store';
const blocks = useAppStore((state) => state.blocks);
const editors = useAppStore((state) => state.editors);

// âœ… è°ƒç”¨ Zustand Actions æ“ä½œæ•°æ®
const loadAllBlocks = useAppStore((state) => state.loadAllBlocks);
const createBlock = useAppStore((state) => state.createBlock);
const writeBlock = useAppStore((state) => state.writeBlock);

// âœ… å¯¼å…¥ç±»å‹ï¼ˆä»…ç±»å‹ï¼‰
import type { Block, MarkdownWritePayload } from '@/bindings';

// âœ… é”™è¯¯å¤„ç†
try {
  const blockId = await createBlock(fileId, 'Block', 'markdown');
  await writeBlock(fileId, blockId, '# Hello');
} catch (error) {
  toast({ title: 'é”™è¯¯', description: error.message });
}

// âœ… é™æ€èµ„æºï¼ˆä½¿ç”¨ importï¼Œä¸è¦ç”¨ publicï¼‰
import logoUrl from '@/assets/images/logo.svg';
<img src={logoUrl} alt="Logo" />

// âœ… ç”¨æˆ·æ•°æ®èµ„æº
import { convertFileSrc } from '@tauri-apps/api/core';
const url = convertFileSrc(filePath);

// âœ… Tailwind CSS + Shadcn/ui
import { Button } from '@/components/ui/button';
<Button className="w-full bg-blue-500 hover:bg-blue-600">Click</Button>
```

---

## ç›®å½•

1. [é™æ€èµ„æºä¸æ ·å¼](#é™æ€èµ„æºä¸æ ·å¼)ï¼ˆâ­ èµ„æºç®¡ç† + Tailwind CSSï¼‰
2. [æ•°æ®æµå‘å›¾](#æ•°æ®æµå‘å›¾)ï¼ˆâ­ å¿…çœ‹ - ç†è§£æ•´ä½“æµç¨‹ï¼‰
3. [æ ¸å¿ƒåŸåˆ™](#æ ¸å¿ƒåŸåˆ™)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [å‰åç«¯é€šä¿¡](#å‰åç«¯é€šä¿¡)
6. [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
7. [ç±»å‹å®‰å…¨](#ç±»å‹å®‰å…¨)
8. [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
9. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
10. [å¸¸è§é”™è¯¯ä¸é™·é˜±](#å¸¸è§é”™è¯¯ä¸é™·é˜±)

---

## é™æ€èµ„æºä¸æ ·å¼

### 1. é™æ€èµ„æºç®¡ç†

#### èµ„æºåˆ†ç±»

åœ¨ Tauri åº”ç”¨ä¸­ï¼Œé™æ€èµ„æºåˆ†ä¸ºä¸‰ç±»ï¼Œéœ€è¦åŒºåˆ«å¯¹å¾…ï¼š

**1. åº”ç”¨å†…ç½®èµ„æºï¼ˆlogoã€é»˜è®¤å›¾æ ‡ç­‰ï¼‰**
- ğŸ“ ä½ç½®ï¼š`src/assets/`
- ğŸ¯ ç”¨é€”ï¼šåº”ç”¨ UI æ‰€éœ€çš„å›ºå®šèµ„æº
- âœ… ç‰¹ç‚¹ï¼šä¼šè¢« Vite å¤„ç†å’Œä¼˜åŒ–

**2. åº”ç”¨å›¾æ ‡å’Œé…ç½®èµ„æº**
- ğŸ“ ä½ç½®ï¼š`src-tauri/icons/`
- ğŸ¯ ç”¨é€”ï¼šåº”ç”¨å›¾æ ‡ã€tray å›¾æ ‡ç­‰
- âœ… ç‰¹ç‚¹ï¼šåœ¨ `tauri.conf.json` ä¸­é…ç½®

**3. ç”¨æˆ·æ•°æ®èµ„æºï¼ˆæ–‡æ¡£ä¸­çš„å›¾ç‰‡ã€é™„ä»¶ç­‰ï¼‰**
- ğŸ“ ä½ç½®ï¼šç”¨æˆ·æ•°æ®ç›®å½•ï¼ˆé€šè¿‡ Tauri API è·å–ï¼‰
- ğŸ¯ ç”¨é€”ï¼š`.elf` æ–‡ä»¶ä¸­çš„å—èµ„æº
- âœ… ç‰¹ç‚¹ï¼šä½¿ç”¨ Tauri æ–‡ä»¶ç³»ç»Ÿ API

#### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ assets/               # âœ… åº”ç”¨å†…ç½®èµ„æºï¼ˆæ¨èï¼‰
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ logo.svg
â”‚   â”‚   â””â”€â”€ placeholder.png
â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â””â”€â”€ sidebar-icon.svg
â”‚   â””â”€â”€ fonts/           # å­—ä½“æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰
â”‚       â””â”€â”€ custom-font.woff2
â””â”€â”€ components/

src-tauri/
â”œâ”€â”€ icons/               # âœ… åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ icon.png
â”‚   â”œâ”€â”€ icon.icns
â”‚   â””â”€â”€ icon.ico
â””â”€â”€ tauri.conf.json
```

âš ï¸ **ä¸è¦ä½¿ç”¨ `public/` ç›®å½•**
- Tauri æ‰“åŒ…åè·¯å¾„å¯èƒ½ä¸æ­£ç¡®
- ä½¿ç”¨ `src/assets/` + import æ›´å¯é 

#### ä½¿ç”¨åº”ç”¨å†…ç½®èµ„æº

**âœ… æ¨èï¼šä½¿ç”¨ import å¯¼å…¥**

```typescript
// å¯¼å…¥å›¾ç‰‡ï¼ˆVite ä¼šå¤„ç†å¹¶è¿”å›ä¼˜åŒ–åçš„ URLï¼‰
import logoUrl from '@/assets/images/logo.svg';
import placeholderUrl from '@/assets/images/placeholder.png';

export function Header() {
  return (
    <div>
      <img src={logoUrl} alt="Logo" className="w-32 h-32" />
      <img src={placeholderUrl} alt="Placeholder" />
    </div>
  );
}
```

**åœ¨ CSS ä¸­ä½¿ç”¨ï¼š**

```css
/* ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä» src/assets/ å¯¼å…¥ */
.logo {
  background-image: url('@/assets/images/logo.svg');
}
```

**SVG ä½œä¸º React ç»„ä»¶ï¼š**

```typescript
// Vite æ”¯æŒå°† SVG ä½œä¸º React ç»„ä»¶å¯¼å…¥
import { ReactComponent as LogoIcon } from '@/assets/icons/logo.svg';

export function Logo() {
  return <LogoIcon className="w-6 h-6 text-blue-500" />;
}
```

#### ä½¿ç”¨ç”¨æˆ·æ•°æ®èµ„æº

å¯¹äº `.elf` æ–‡ä»¶ä¸­çš„å—èµ„æºï¼ˆç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ã€é™„ä»¶ç­‰ï¼‰ï¼š

```typescript
import { convertFileSrc } from '@tauri-apps/api/core';
import { TauriClient } from '@/lib/tauri-client';

export function BlockImage({ fileId, blockId, fileName }: Props) {
  const [imageUrl, setImageUrl] = useState<string>('');

  useEffect(() => {
    async function loadImage() {
      // è·å–å—èµ„æºçš„ç»å¯¹è·¯å¾„
      const filePath = await TauriClient.file.getBlockAssetPath(
        fileId,
        blockId,
        fileName
      );

      // è½¬æ¢ä¸º Tauri å¯ç”¨çš„ URLï¼ˆasset:// åè®®ï¼‰
      const url = convertFileSrc(filePath);
      setImageUrl(url);
    }

    loadImage();
  }, [fileId, blockId, fileName]);

  return <img src={imageUrl} alt={fileName} />;
}
```

#### åº”ç”¨å›¾æ ‡é…ç½®

åº”ç”¨å›¾æ ‡åœ¨ `tauri.conf.json` ä¸­é…ç½®ï¼š

```json
{
  "bundle": {
    "icon": [
      "icons/32x32.png",
      "icons/128x128.png",
      "icons/icon.icns",
      "icons/icon.ico"
    ]
  },
  "app": {
    "windows": [
      {
        "icon": "icons/icon.png"
      }
    ]
  }
}
```

#### æœ€ä½³å®è·µæ€»ç»“

| èµ„æºç±»å‹ | å­˜æ”¾ä½ç½® | ä½¿ç”¨æ–¹å¼ | ç¤ºä¾‹ |
|---------|---------|---------|------|
| **UI å›¾ç‰‡/å›¾æ ‡** | `src/assets/` | `import` å¯¼å…¥ | Logoã€å ä½å›¾ |
| **åº”ç”¨å›¾æ ‡** | `src-tauri/icons/` | `tauri.conf.json` | çª—å£å›¾æ ‡ã€æ‰˜ç›˜å›¾æ ‡ |
| **ç”¨æˆ·æ•°æ®** | ç”¨æˆ·ç›®å½• | `convertFileSrc()` | å—ä¸­çš„å›¾ç‰‡ã€é™„ä»¶ |

**âœ… æ¨èåšæ³•ï¼š**
- æ‰€æœ‰åº”ç”¨ UI èµ„æºéƒ½æ”¾åœ¨ `src/assets/` å¹¶é€šè¿‡ import ä½¿ç”¨
- å›¾ç‰‡ã€SVGã€å­—ä½“ç­‰éƒ½å¯ä»¥è¢« Vite ä¼˜åŒ–
- åˆ©ç”¨ TypeScript ç±»å‹æ£€æŸ¥ï¼ˆimport ä¸å­˜åœ¨çš„èµ„æºä¼šæŠ¥é”™ï¼‰

**âŒ é¿å…ï¼š**
- ä¸è¦ä½¿ç”¨ `public/` ç›®å½•ï¼ˆTauri æ‰“åŒ…åè·¯å¾„ä¸å¯é ï¼‰
- ä¸è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ `src="/images/logo.svg"`ï¼ˆå¼€å‘ç¯å¢ƒå¯èƒ½æ­£å¸¸ï¼Œæ‰“åŒ…åå¤±è´¥ï¼‰
- ä¸è¦å°†ç”¨æˆ·æ•°æ®æ”¾åœ¨åº”ç”¨ç›®å½•ä¸­

### 2. Tailwind CSS ä½¿ç”¨è§„èŒƒ

#### åŸºç¡€é…ç½®

é¡¹ç›®å·²é…ç½® Tailwind CSSï¼Œé…ç½®æ–‡ä»¶ä½äº `tailwind.config.js`ã€‚

#### ä½¿ç”¨ Tailwind ç±»å

**âœ… æ¨èåšæ³•ï¼šä½¿ç”¨ Tailwind å®ç”¨ç±»**

```tsx
export function MyComponent() {
  return (
    <div className="flex items-center gap-4 p-6 bg-white rounded-lg shadow-md">
      <img src="/images/avatar.png" className="w-12 h-12 rounded-full" />
      <div className="flex-1">
        <h3 className="text-lg font-semibold text-gray-900">Title</h3>
        <p className="text-sm text-gray-600">Description</p>
      </div>
    </div>
  );
}
```

**å“åº”å¼è®¾è®¡ï¼š**

```tsx
<div className="w-full md:w-1/2 lg:w-1/3">
  {/* ç§»åŠ¨ç«¯å…¨å®½ï¼Œå¹³æ¿ä¸€åŠï¼Œæ¡Œé¢ä¸‰åˆ†ä¹‹ä¸€ */}
</div>

<div className="text-sm md:text-base lg:text-lg">
  {/* å“åº”å¼å­—ä½“å¤§å° */}
</div>
```

**çŠ¶æ€å˜ä½“ï¼š**

```tsx
<button className="bg-blue-500 hover:bg-blue-600 active:bg-blue-700 disabled:bg-gray-300">
  Click me
</button>

<input className="border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" />
```

#### ä½¿ç”¨ Shadcn/ui ç»„ä»¶

é¡¹ç›®ä½¿ç”¨ Shadcn/ui ç»„ä»¶åº“ï¼Œå·²é¢„é…ç½® Tailwindã€‚

**å¯¼å…¥ç»„ä»¶ï¼š**

```tsx
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Input } from '@/components/ui/input';

export function MyForm() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Form Title</CardTitle>
      </CardHeader>
      <CardContent className="space-y-4">
        <Input placeholder="Enter text" />
        <Button>Submit</Button>
      </CardContent>
    </Card>
  );
}
```

**è‡ªå®šä¹‰ Shadcn ç»„ä»¶æ ·å¼ï¼š**

```tsx
// âœ… é€šè¿‡ className è¦†ç›–æ ·å¼
<Button className="w-full bg-purple-600 hover:bg-purple-700">
  Custom Button
</Button>

// âœ… ä½¿ç”¨ variant å±æ€§ï¼ˆå¦‚æœç»„ä»¶æ”¯æŒï¼‰
<Button variant="destructive">Delete</Button>
<Button variant="outline">Cancel</Button>
```

#### è‡ªå®šä¹‰æ ·å¼ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰

**ä½•æ—¶ä½¿ç”¨è‡ªå®šä¹‰ CSSï¼š**
- Tailwind æ— æ³•å®ç°çš„å¤æ‚åŠ¨ç”»
- éœ€è¦åŠ¨æ€è®¡ç®—çš„æ ·å¼
- ç¬¬ä¸‰æ–¹åº“çš„æ ·å¼è¦†ç›–

**ä½¿ç”¨ CSS Moduleï¼š**

```tsx
// MyComponent.module.css
.customAnimation {
  animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

// MyComponent.tsx
import styles from './MyComponent.module.css';

<div className={`${styles.customAnimation} flex items-center`}>
  {/* ç»“åˆ Tailwind å’Œ CSS Module */}
</div>
```

#### æ¡ä»¶ç±»å

**ä½¿ç”¨ clsx æˆ– cn å·¥å…·ï¼š**

```tsx
import { cn } from '@/lib/utils';

export function Badge({ variant, className }: Props) {
  return (
    <span
      className={cn(
        'inline-flex items-center rounded-full px-3 py-1 text-sm',
        {
          'bg-blue-100 text-blue-800': variant === 'info',
          'bg-red-100 text-red-800': variant === 'error',
          'bg-green-100 text-green-800': variant === 'success',
        },
        className
      )}
    >
      {children}
    </span>
  );
}
```

#### ä¸»é¢˜é…ç½®

**è‡ªå®šä¹‰é¢œè‰²ï¼ˆåœ¨ tailwind.config.jsï¼‰ï¼š**

```javascript
module.exports = {
  theme: {
    extend: {
      colors: {
        brand: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          // ... å…¶ä»–è‰²é˜¶
          900: '#0c4a6e',
        },
      },
    },
  },
};
```

**ä½¿ç”¨è‡ªå®šä¹‰é¢œè‰²ï¼š**

```tsx
<div className="bg-brand-500 text-brand-50">
  Branded content
</div>
```

#### æœ€ä½³å®è·µ

**âœ… æ¨èï¼š**
- ä¼˜å…ˆä½¿ç”¨ Tailwind å®ç”¨ç±»
- ä½¿ç”¨ Shadcn/ui ç»„ä»¶ä½œä¸ºåŸºç¡€
- ä¿æŒç±»åç®€æ´ï¼Œé¿å…è¿‡é•¿çš„ className
- ä½¿ç”¨ `cn()` å·¥å…·å‡½æ•°åˆå¹¶æ¡ä»¶ç±»å

**âŒ é¿å…ï¼š**
- ä¸è¦åˆ›å»ºå¤§é‡è‡ªå®šä¹‰ CSS æ–‡ä»¶
- ä¸è¦ä½¿ç”¨å†…è”æ ·å¼ï¼ˆé™¤éåŠ¨æ€è®¡ç®—ï¼‰
- ä¸è¦é‡å¤é€ è½®å­ï¼Œä¼˜å…ˆä½¿ç”¨ Shadcn/ui ç»„ä»¶

---

## æ•°æ®æµå‘å›¾

### å‰ç«¯æ•°æ®æµå‘å…¨æ™¯ï¼ˆæ ‡å‡†çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰ç«¯ï¼ˆReact/WebViewï¼‰                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚  ç”¨æˆ·æ“ä½œ     â”‚  ç‚¹å‡»æŒ‰é’® / è¾“å…¥æ–‡æœ¬ / æ‹–æ‹½ç­‰                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  React ç»„ä»¶ (UI Layer)                   â”‚                       â”‚
â”‚  â”‚  - BlockEditor.tsx                       â”‚                       â”‚
â”‚  â”‚  - DocumentView.tsx                      â”‚                       â”‚
â”‚  â”‚                                          â”‚                       â”‚
â”‚  â”‚  âœ… åªåšä¸¤ä»¶äº‹ï¼š                          â”‚                       â”‚
â”‚  â”‚    1. ä» Zustand è¯»å–çŠ¶æ€                â”‚                       â”‚
â”‚  â”‚    2. è°ƒç”¨ Zustand Actions               â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ è°ƒç”¨ Actions / è®¢é˜… State                           â”‚
â”‚                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Zustand Store (çŠ¶æ€ç®¡ç†ä¸­å¿ƒ) â­          â”‚                       â”‚
â”‚  â”‚                                          â”‚                       â”‚
â”‚  â”‚  State:                                  â”‚                       â”‚
â”‚  â”‚  - blocks: Map<string, Block>            â”‚                       â”‚
â”‚  â”‚  - editors: Map<string, Editor>          â”‚                       â”‚
â”‚  â”‚  - openFiles: Map<string, FileState>     â”‚                       â”‚
â”‚  â”‚                                          â”‚                       â”‚
â”‚  â”‚  Actions (å°è£…æ‰€æœ‰ä¸šåŠ¡é€»è¾‘):              â”‚                       â”‚
â”‚  â”‚  - writeBlock()                          â”‚                       â”‚
â”‚  â”‚  - createBlock()                         â”‚                       â”‚
â”‚  â”‚  - deleteBlock()                         â”‚                       â”‚
â”‚  â”‚  - loadAllBlocks()                       â”‚                       â”‚
â”‚  â”‚                                          â”‚                       â”‚
â”‚  â”‚  âš ï¸ Actions å†…éƒ¨è°ƒç”¨ TauriClient          â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ Actions å†…éƒ¨è°ƒç”¨ TauriClient                        â”‚
â”‚                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  TauriClient (IPC å°è£…å±‚)                â”‚                       â”‚
â”‚  â”‚  - å°è£… Tauri IPC è°ƒç”¨                    â”‚                       â”‚
â”‚  â”‚  - è‡ªåŠ¨é”™è¯¯å¤„ç† + Result è§£åŒ…            â”‚                       â”‚
â”‚  â”‚  - TauriClient.block.writeBlock()        â”‚                       â”‚
â”‚  â”‚  - TauriClient.block.createBlock()       â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ invoke()                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ Tauri IPC (è¿›ç¨‹é—´é€šä¿¡)
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åç«¯ï¼ˆRust/Tauriï¼‰                            â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Tauri Commands (#[tauri::command])      â”‚                       â”‚
â”‚  â”‚  - execute_command()                     â”‚                       â”‚
â”‚  â”‚  - get_all_blocks()                      â”‚                       â”‚
â”‚  â”‚  - create_file()                         â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Engine Actor (å‘½ä»¤å¤„ç†)                 â”‚                       â”‚
â”‚  â”‚  1. åŠ è½½ Block/Editor çŠ¶æ€                â”‚                       â”‚
â”‚  â”‚  2. æˆæƒæ£€æŸ¥ (CBAC)                      â”‚                       â”‚
â”‚  â”‚  3. æ‰§è¡Œ Capability Handler               â”‚                       â”‚
â”‚  â”‚  4. ç”Ÿæˆ Event                           â”‚                       â”‚
â”‚  â”‚  5. å†²çªæ£€æµ‹ (å‘é‡æ—¶é’Ÿ)                   â”‚                       â”‚
â”‚  â”‚  6. æäº¤åˆ° EventStore                    â”‚                       â”‚
â”‚  â”‚  7. æ›´æ–°å†…å­˜çŠ¶æ€                          â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ è¿”å› Result<Vec<Event>, String>                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ è¿”å›ç»“æœ
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å‰ç«¯ï¼ˆReact/WebViewï¼‰                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  TauriClient å¤„ç†å“åº”                     â”‚                       â”‚
â”‚  â”‚  - Ok â†’ è¿”å›æ•°æ®ç»™ Zustand Action        â”‚                       â”‚
â”‚  â”‚  - Error â†’ æŠ›å‡ºå¼‚å¸¸                       â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ è¿”å›æ•°æ®                                            â”‚
â”‚                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  Zustand Action è‡ªåŠ¨æ›´æ–°çŠ¶æ€              â”‚                       â”‚
â”‚  â”‚  - æ¥æ”¶åç«¯è¿”å›çš„æ•°æ®                      â”‚                       â”‚
â”‚  â”‚  - æ›´æ–° Store ä¸­çš„ blocks/editors         â”‚                       â”‚
â”‚  â”‚  - è§¦å‘è®¢é˜…ç»„ä»¶é‡æ–°æ¸²æŸ“                    â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                 â”‚                                                    â”‚
â”‚                 â”‚ State å˜åŒ–                                          â”‚
â”‚                 â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  React ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“                    â”‚                       â”‚
â”‚  â”‚  - useAppStore() hook æ£€æµ‹åˆ°å˜åŒ–          â”‚                       â”‚
â”‚  â”‚  - é‡æ–°æ¸²æŸ“ä½¿ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶                â”‚                       â”‚
â”‚  â”‚  - æ˜¾ç¤ºæœ€æ–°æ•°æ®                            â”‚                       â”‚
â”‚  â”‚  - Toast æç¤ºï¼ˆç”± Action è§¦å‘ï¼‰           â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### â­ æ ¸å¿ƒåŸåˆ™ï¼šå•ä¸€æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ â†’ ç»„ä»¶è°ƒç”¨ Zustand Action â†’ Action è°ƒç”¨ TauriClient â†’ åç«¯å¤„ç†
         â† ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“ â† Zustand æ›´æ–°çŠ¶æ€ â† TauriClient è¿”å› â†
```

**æ‰€æœ‰æ•°æ®æ“ä½œï¼ˆè¯»å’Œå†™ï¼‰éƒ½é€šè¿‡ Zustand Storeï¼**

### å…¸å‹æ“ä½œæµç¨‹ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šåˆ›å»ºå¹¶ç¼–è¾‘ Markdown å—ï¼ˆâœ… æ­£ç¡®æ–¹å¼ï¼‰

```typescript
// React ç»„ä»¶
function DocumentEditor({ fileId }: Props) {
  // 1. ä» Zustand è¯»å–çŠ¶æ€
  const blocks = useAppStore((state) => state.blocks);

  // 2. è·å– Zustand Actions
  const createBlock = useAppStore((state) => state.createBlock);
  const writeBlock = useAppStore((state) => state.writeBlock);

  // 3. ç”¨æˆ·ç‚¹å‡»"åˆ›å»ºå—"æŒ‰é’®
  async function handleCreateBlock() {
    try {
      // 4. è°ƒç”¨ Zustand Actionï¼ˆä¸ç›´æ¥è°ƒç”¨ TauriClientï¼‰
      const blockId = await createBlock(fileId, 'My Document', 'markdown');

      // 5. Zustand Action å†…éƒ¨è‡ªåŠ¨å®Œæˆï¼š
      //    âœ… è°ƒç”¨ TauriClient.block.createBlock()
      //    âœ… åç«¯å¤„ç†ï¼ˆæˆæƒ â†’ ç”ŸæˆEvent â†’ ä¿å­˜ï¼‰
      //    âœ… è·å–æœ€æ–°çŠ¶æ€
      //    âœ… æ›´æ–° Store ä¸­çš„ blocks
      //    âœ… è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“

      // 6. å†™å…¥å†…å®¹ï¼ˆä¹Ÿæ˜¯è°ƒç”¨ Actionï¼‰
      await writeBlock(fileId, blockId, '# Hello World');

      // 7. Zustand Action å†æ¬¡è‡ªåŠ¨å®Œæˆï¼š
      //    âœ… è°ƒç”¨ TauriClient.block.writeBlock()
      //    âœ… åç«¯æ‰§è¡Œ markdown.write
      //    âœ… æ›´æ–° Store çŠ¶æ€
      //    âœ… UI è‡ªåŠ¨åˆ·æ–°

      // 8. æ˜¾ç¤ºæˆåŠŸæç¤º
      toast({ title: 'æˆåŠŸ', description: 'å—å·²åˆ›å»ºå¹¶ä¿å­˜' });

    } catch (error) {
      // 9. é”™è¯¯å¤„ç†ï¼ˆZustand Action ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
      toast({
        title: 'é”™è¯¯',
        description: error.message,
        variant: 'destructive'
      });
    }
  }

  // 10. UI æ¸²æŸ“ï¼ˆè‡ªåŠ¨ä» Zustand è·å–æœ€æ–°æ•°æ®ï¼‰
  return (
    <div>
      <Button onClick={handleCreateBlock}>åˆ›å»ºå—</Button>
      {Array.from(blocks.values()).map(block => (
        <BlockCard key={block.block_id} block={block} />
      ))}
    </div>
  );
}
```

**å…³é”®ç‚¹ï¼š**
- âœ… ç»„ä»¶åªè°ƒç”¨ Zustand Actionsï¼Œä¸ç›´æ¥ä½¿ç”¨ TauriClient
- âœ… Action å†…éƒ¨å¤„ç†æ‰€æœ‰é€»è¾‘ï¼ˆè°ƒç”¨åç«¯ã€æ›´æ–°çŠ¶æ€ï¼‰
- âœ… UI è‡ªåŠ¨å“åº”çŠ¶æ€å˜åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°

#### ç¤ºä¾‹ 2ï¼šè¯»å–å—å†…å®¹ï¼ˆåªè¯»æ“ä½œï¼‰

```typescript
// React ç»„ä»¶
function DocumentView({ fileId }: Props) {
  // 1. ä» Zustand è¯»å–çŠ¶æ€
  const blocks = useAppStore((state) => state.blocks);
  const loadAllBlocks = useAppStore((state) => state.loadAllBlocks);

  // 2. ç»„ä»¶æŒ‚è½½æ—¶åŠ è½½æ•°æ®
  useEffect(() => {
    async function loadDocument() {
      try {
        // 3. è°ƒç”¨ Zustand Action
        await loadAllBlocks(fileId);

        // 4. Action å†…éƒ¨è‡ªåŠ¨å®Œæˆï¼š
        //    âœ… è°ƒç”¨ TauriClient.block.getAllBlocks()
        //    âœ… åç«¯ä» StateProjector è¯»å–çŠ¶æ€
        //    âœ… è¿”å›æ•°æ®ï¼ˆä¸ç”Ÿæˆ Eventï¼‰
        //    âœ… æ›´æ–° Store ä¸­çš„ blocks
        //    âœ… è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“

      } catch (error) {
        toast({ title: 'åŠ è½½å¤±è´¥', description: error.message });
      }
    }

    loadDocument();
  }, [fileId, loadAllBlocks]);

  // 5. UI è‡ªåŠ¨æ¸²æŸ“ï¼ˆæ•°æ®æ¥è‡ª Zustandï¼‰
  return (
    <div>
      {Array.from(blocks.values()).map(block => (
        <BlockView key={block.block_id} block={block} />
      ))}
    </div>
  );
}
```

**å…³é”®ç‚¹ï¼š**
- âœ… ä½¿ç”¨ `loadAllBlocks` Action åŠ è½½æ•°æ®
- âœ… æ•°æ®è‡ªåŠ¨æ›´æ–°åˆ° Store
- âœ… ç»„ä»¶é€šè¿‡ `useAppStore` hook è‡ªåŠ¨è·å–æœ€æ–°æ•°æ®

### æ•°æ®æµå…³é”®ç‚¹

| é˜¶æ®µ | å…³é”®æ“ä½œ | æ³¨æ„äº‹é¡¹ |
|------|---------|---------|
| **1. ç”¨æˆ·æ“ä½œ** | ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡æœ¬ | UI äº‹ä»¶è§¦å‘ |
| **2. ç»„ä»¶è°ƒç”¨** | è°ƒç”¨ Zustand Action | âš ï¸ ä¸ç›´æ¥è°ƒç”¨ TauriClient |
| **3. Action æ‰§è¡Œ** | Action å†…éƒ¨è°ƒç”¨ TauriClient | å°è£…ä¸šåŠ¡é€»è¾‘ |
| **4. IPC é€šä¿¡** | invoke() è°ƒç”¨åç«¯ | è·¨è¿›ç¨‹é€šä¿¡ |
| **5. åç«¯å¤„ç†** | æˆæƒ â†’ æ‰§è¡Œ â†’ ç”Ÿæˆ Event | äº‹ä»¶æº¯æºæ¶æ„ |
| **6. çŠ¶æ€æ›´æ–°** | EventStore â†’ StateProjector | åç«¯å†…å­˜çŠ¶æ€åŒæ­¥ |
| **7. è¿”å›å‰ç«¯** | Result<T, E> â†’ TauriClient | è‡ªåŠ¨é”™è¯¯å¤„ç† |
| **8. Action æ›´æ–°** | Zustand Action æ›´æ–° Store | è‡ªåŠ¨æ›´æ–°çŠ¶æ€ |
| **9. UI æ¸²æŸ“** | React ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“ | useAppStore hook æ£€æµ‹å˜åŒ– |

### âš ï¸ å¸¸è§é”™è¯¯æµç¨‹

```typescript
// âŒ é”™è¯¯æµç¨‹ 1ï¼šç»„ä»¶ç›´æ¥è°ƒç”¨ TauriClient
function MyComponent() {
  const [block, setBlock] = useState(null);

  async function handleSave(content: string) {
    await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');
    const updated = await TauriClient.block.getBlock(fileId, blockId);
    setBlock(updated);  // æ‰‹åŠ¨æ›´æ–°æœ¬åœ°çŠ¶æ€
  }
}
// é—®é¢˜ï¼š
// 1. ç»•è¿‡äº† Zustandï¼Œå…¶ä»–ç»„ä»¶çœ‹ä¸åˆ°å˜åŒ–
// 2. éœ€è¦æ‰‹åŠ¨ç®¡ç†çŠ¶æ€åŒæ­¥
// 3. ä¸šåŠ¡é€»è¾‘æ•£è½åœ¨å„ä¸ªç»„ä»¶ä¸­

// âŒ é”™è¯¯æµç¨‹ 2ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡
const block = useAppStore((state) => state.blocks.get(blockId));
block.contents.markdown = 'New content';  // ç›´æ¥ä¿®æ”¹
// é—®é¢˜ï¼š
// 1. ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼ˆZustand ä¸çŸ¥é“å¯¹è±¡å†…éƒ¨å˜åŒ–ï¼‰
// 2. ä¸ä¼šè°ƒç”¨åç«¯ï¼Œä¿®æ”¹ä¸ä¼šæŒä¹…åŒ–

// âŒ é”™è¯¯æµç¨‹ 3ï¼šæ··åˆä½¿ç”¨ TauriClient å’Œ Zustand
async function handleSave(content: string) {
  // è°ƒç”¨ TauriClient
  await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');
  // å¿˜è®°æ›´æ–° Zustand
}
// é—®é¢˜ï¼šZustand ä¸­çš„æ•°æ®è¿‡æœŸï¼ŒUI æ˜¾ç¤ºæ—§æ•°æ®

// âœ… æ­£ç¡®æµç¨‹ï¼šåªé€šè¿‡ Zustand Actions
function MyComponent() {
  const block = useAppStore((state) => state.blocks.get(blockId));
  const writeBlock = useAppStore((state) => state.writeBlock);

  async function handleSave(content: string) {
    // åªè°ƒç”¨ Zustand Actionï¼Œä¸€åˆ‡è‡ªåŠ¨å®Œæˆ
    await writeBlock(fileId, blockId, content);
  }
}
```

---

## æ ¸å¿ƒåŸåˆ™

### 1. ä¸¥æ ¼çš„å‰åç«¯åˆ†ç¦»

**ã€ç¡¬æ€§è§„åˆ™ã€‘å‰ç«¯ä¸èƒ½ç›´æ¥è°ƒç”¨åç«¯ä»£ç **

åœ¨ Tauri æ¶æ„ä¸­ï¼Œå‰ç«¯å’Œåç«¯è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­ï¼š
- **å‰ç«¯**: è¿è¡Œåœ¨ WebView ä¸­çš„ React åº”ç”¨
- **åç«¯**: è¿è¡Œåœ¨ Rust è¿›ç¨‹ä¸­çš„ Tauri åº”ç”¨

**âœ… æ­£ç¡®åšæ³•ï¼šé€šè¿‡ Tauri IPC è°ƒç”¨åç«¯**

```typescript
// ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„ bindings
import { commands } from '@/bindings';

const result = await commands.executeCommand(fileId, cmd);
```

**âŒ é”™è¯¯åšæ³•ï¼šå°è¯•ç›´æ¥å¯¼å…¥åç«¯ä»£ç **

```typescript
// âŒ è¿™æ ·åšæ˜¯ä¸å¯èƒ½çš„ï¼Œå‰ç«¯æ— æ³•ç›´æ¥è®¿é—® Rust ä»£ç 
import { execute_command } from 'src-tauri/src/commands/block';
```

### 2. åªèƒ½ä½¿ç”¨æš´éœ²çš„æ¥å£

å‰ç«¯åªèƒ½ä½¿ç”¨ `src/bindings.ts` ä¸­è‡ªåŠ¨ç”Ÿæˆçš„æ¥å£ã€‚è¿™äº›æ¥å£å¯¹åº”äºåç«¯åœ¨ `src-tauri/src/lib.rs` ä¸­æ³¨å†Œçš„ Tauri commandsã€‚

**æŸ¥çœ‹å¯ç”¨æ¥å£ï¼š**

```typescript
// src/bindings.ts (è‡ªåŠ¨ç”Ÿæˆ)
export const commands = {
  // æ–‡ä»¶æ“ä½œ
  createFile,
  openFile,
  saveFile,
  closeFile,
  // å—æ“ä½œ
  executeCommand,
  getAllBlocks,
  getBlock,
  // ç¼–è¾‘å™¨æ“ä½œ
  createEditor,
  listEditors,
  // ...
}
```

**å¦‚æœéœ€è¦æ–°åŠŸèƒ½ï¼š**
1. ä¸è¦å°è¯•åœ¨å‰ç«¯å®ç°åç«¯é€»è¾‘
2. è¯·åç«¯å¼€å‘è€…åœ¨ `src-tauri/src/commands/` ä¸­æ·»åŠ æ–°çš„ Tauri command
3. ç­‰å¾… bindings.ts è‡ªåŠ¨æ›´æ–°åä½¿ç”¨

---

## æ¶æ„æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **UI ç»„ä»¶**: Shadcn/ui (åŸºäº Radix UI)
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ ·å¼**: Tailwind CSS
- **IPC é€šä¿¡**: Tauri Specta v2 (è‡ªåŠ¨ç±»å‹ç”Ÿæˆ)

### ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ bindings.ts              # ã€è‡ªåŠ¨ç”Ÿæˆã€‘Tauri ç±»å‹å’Œå‘½ä»¤ç»‘å®š
â”œâ”€â”€ main.tsx                 # React å…¥å£
â”œâ”€â”€ App.tsx                  # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ components/              # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                  # Shadcn UI ç»„ä»¶ (å¯å¤ç”¨åŸºç¡€ç»„ä»¶)
â”‚   â”œâ”€â”€ editor/              # ç¼–è¾‘å™¨ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/           # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”œâ”€â”€ projects/            # é¡¹ç›®ç®¡ç†ç»„ä»¶
â”‚   â””â”€â”€ permission/          # æƒé™ç®¡ç†ç»„ä»¶
â”œâ”€â”€ pages/                   # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Projects.tsx         # é¡¹ç›®åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ DocumentEditor.tsx   # æ–‡æ¡£ç¼–è¾‘é¡µ
â”‚   â””â”€â”€ NotFound.tsx         # 404 é¡µé¢
â”œâ”€â”€ lib/                     # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ tauri-client.ts      # ã€é‡è¦ã€‘Tauri å®¢æˆ·ç«¯å°è£…
â”‚   â”œâ”€â”€ app-store.ts         # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ utils.ts             # å·¥å…·å‡½æ•°
â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ use-mobile.tsx       # ç§»åŠ¨ç«¯æ£€æµ‹
â”‚   â””â”€â”€ use-toast.ts         # Toast æç¤º
â””â”€â”€ utils/                   # ä¸šåŠ¡å·¥å…·å‡½æ•°
    â””â”€â”€ vfs-tree.ts          # è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ ‘å¤„ç†
```

---

## å‰åç«¯é€šä¿¡

### 1. è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹ç»‘å®š

**ã€å…³é”®æ–‡ä»¶ã€‘`src/bindings.ts`**

- **è‡ªåŠ¨ç”Ÿæˆ**: ç”± tauri-specta åœ¨æ¯æ¬¡ `pnpm tauri dev` æ—¶ç”Ÿæˆ
- **ç¦æ­¢æ‰‹åŠ¨ç¼–è¾‘**: ä»»ä½•æ‰‹åŠ¨ä¿®æ”¹éƒ½ä¼šåœ¨ä¸‹æ¬¡æ„å»ºæ—¶è¢«è¦†ç›–
- **ç±»å‹åŒæ­¥**: ç¡®ä¿å‰ç«¯ç±»å‹ä¸åç«¯ Rust ç±»å‹å®Œå…¨ä¸€è‡´

**ç”Ÿæˆæ—¶æœºï¼š**
- è¿è¡Œ `pnpm tauri dev` (å¼€å‘æ¨¡å¼)
- åç«¯ Rust ä»£ç ç¼–è¯‘æ—¶ (debug æ¨¡å¼)
- **ä¸ä¼š**åœ¨ release æ„å»ºæ—¶ç”Ÿæˆ

**ç±»å‹æ˜ å°„è§„åˆ™ï¼š**

| Rust ç±»å‹ | TypeScript ç±»å‹ | ç¤ºä¾‹ |
|----------|----------------|------|
| `String` | `string` | `file_id: String` â†’ `fileId: string` |
| `u32`, `i32` | `number` | `count: u32` â†’ `count: number` |
| `bool` | `boolean` | `is_open: bool` â†’ `isOpen: boolean` |
| `Vec<T>` | `T[]` | `Vec<Block>` â†’ `Block[]` |
| `Option<T>` | `T \| null` | `Option<String>` â†’ `string \| null` |
| `Result<T, E>` | `Result<T, E>` | `Result<Block, String>` â†’ `Result<Block, string>` |
| `HashMap<K, V>` | `Partial<{[key in K]: V}>` | - |

**å‘½åè½¬æ¢è§„åˆ™ï¼š**
- Rust `snake_case` â†’ TypeScript `camelCase`
- `file_id` â†’ `fileId`
- `block_type` â†’ `blockType`
- `editor_id` â†’ `editorId`

### 2. TauriClient å°è£…å±‚

**TauriClient çš„å®šä½ï¼šä»…åœ¨ Zustand Actions å†…éƒ¨ä½¿ç”¨**

`src/lib/tauri-client.ts` æ˜¯å¯¹ `bindings.ts` çš„å°è£…ï¼Œæä¾›æ›´å‹å¥½çš„ API å’Œé”™è¯¯å¤„ç†ã€‚

**ã€å…³é”®ã€‘ä¸‰å±‚æ¶æ„ï¼š**

```
React ç»„ä»¶ â†’ Zustand Actions â†’ TauriClient â†’ Tauri IPC â†’ åç«¯
   â†‘                                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ State å˜åŒ–è§¦å‘é‡æ–°æ¸²æŸ“ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ã€ç¡¬æ€§è§„åˆ™ã€‘ç»„ä»¶ä¸èƒ½ç›´æ¥è°ƒç”¨ TauriClient**
- âŒ ç»„ä»¶ä¸­ç¦æ­¢ `import { TauriClient } from '@/lib/tauri-client'`
- âœ… TauriClient **åªèƒ½**åœ¨ `src/lib/app-store.ts` çš„ Zustand Actions å†…éƒ¨ä½¿ç”¨
- âœ… ç»„ä»¶åªèƒ½é€šè¿‡ `useAppStore` è°ƒç”¨ Actions

**TauriClient æ¨¡å—ç»“æ„ï¼š**

```typescript
// src/lib/tauri-client.ts
export const TauriClient = {
  file: FileOperations,        // æ–‡ä»¶æ“ä½œ
  block: BlockOperations,      // å—æ“ä½œ
  editor: EditorOperations,    // ç¼–è¾‘å™¨æ“ä½œ
  directory: DirectoryOperations, // ç›®å½•æ“ä½œ
  event: EventOperations,      // äº‹ä»¶æ“ä½œ
}
```

**âœ… æ­£ç¡®ä½¿ç”¨ç¤ºä¾‹ï¼ˆåœ¨ Zustand Store å†…éƒ¨ï¼‰ï¼š**

```typescript
// src/lib/app-store.ts
import { TauriClient } from '@/lib/tauri-client';

export const useAppStore = create<AppStore>((set, get) => ({
  blocks: new Map(),

  // Action å†…éƒ¨ä½¿ç”¨ TauriClient
  loadAllBlocks: async (fileId) => {
    const blocks = await TauriClient.block.getAllBlocks(fileId);
    const blocksMap = new Map(blocks.map(b => [b.block_id, b]));
    set({ blocks: blocksMap });
  },

  createBlock: async (fileId, name, type) => {
    const events = await TauriClient.block.createBlock(fileId, name, type);
    const blockId = events[0].entity;
    await get().loadAllBlocks(fileId); // é‡æ–°åŠ è½½
    return blockId;
  },
}));
```

**âœ… æ­£ç¡®ä½¿ç”¨ç¤ºä¾‹ï¼ˆåœ¨ç»„ä»¶ä¸­è°ƒç”¨ Actionsï¼‰ï¼š**

```typescript
// src/components/Editor.tsx
import { useAppStore } from '@/lib/app-store';

function Editor() {
  const blocks = useAppStore((state) => state.blocks);
  const loadAllBlocks = useAppStore((state) => state.loadAllBlocks);

  useEffect(() => {
    loadAllBlocks(fileId); // è°ƒç”¨ Actionï¼Œä¸ç›´æ¥è°ƒç”¨ TauriClient
  }, [fileId]);
}
```

**âŒ é”™è¯¯åšæ³•ï¼šç»„ä»¶ç›´æ¥ä½¿ç”¨ TauriClient**

```typescript
// âŒ ç¦æ­¢åœ¨ç»„ä»¶ä¸­è¿™æ ·åš
import { TauriClient } from '@/lib/tauri-client';

function Editor() {
  const [blocks, setBlocks] = useState([]);

  useEffect(() => {
    // âŒ é”™è¯¯ï¼ç»•è¿‡äº† Zustand
    TauriClient.block.getAllBlocks(fileId).then(setBlocks);
  }, [fileId]);
}
```

**ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**

| ä¼˜åŠ¿ | è¯´æ˜ |
|-----|------|
| **å•ä¸€æ•°æ®æº** | æ‰€æœ‰æ•°æ®æ“ä½œé€šè¿‡ Zustandï¼Œé¿å…çŠ¶æ€ä¸ä¸€è‡´ |
| **è‡ªåŠ¨åŒæ­¥** | Actions å†…éƒ¨è‡ªåŠ¨æ›´æ–° Storeï¼Œç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“ |
| **ä»£ç å¤ç”¨** | ä¸šåŠ¡é€»è¾‘é›†ä¸­åœ¨ Storeï¼Œé¿å…é‡å¤ä»£ç  |
| **æ˜“äºæµ‹è¯•** | åªéœ€ mock Storeï¼Œä¸éœ€è¦ mock TauriClient |
| **æ¸…æ™°çš„æ•°æ®æµ** | ç»„ä»¶ â†’ Actions â†’ TauriClientï¼Œæµç¨‹ä¸€ç›®äº†ç„¶ |

### 3. é”™è¯¯å¤„ç†

**ã€å¼ºåˆ¶è§„èŒƒã€‘åœ¨ Zustand Actions ä¸­å¤„ç†é”™è¯¯**

TauriClient è‡ªåŠ¨å°† Result ç±»å‹è½¬æ¢ä¸ºå¼‚å¸¸ï¼ŒActions åº”è¯¥æ•è·å¹¶å¤„ç†ï¼š

**âœ… åœ¨ Zustand Action ä¸­å¤„ç†é”™è¯¯ï¼š**

```typescript
// src/lib/app-store.ts
export const useAppStore = create<AppStore>((set) => ({
  loadAllBlocks: async (fileId) => {
    try {
      const blocks = await TauriClient.block.getAllBlocks(fileId);
      const blocksMap = new Map(blocks.map(b => [b.block_id, b]));
      set({ blocks: blocksMap });
      console.log(`åŠ è½½äº† ${blocks.length} ä¸ªå—`);
    } catch (error) {
      console.error(`é”™è¯¯: ${error.message}`);
      // å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤º toastï¼Œæˆ–è€…é‡æ–°æŠ›å‡ºè®©ç»„ä»¶å¤„ç†
      throw error;
    }
  },
}));
```

**âœ… åœ¨ç»„ä»¶ä¸­å¤„ç† Action é”™è¯¯ï¼š**

```typescript
// src/components/Editor.tsx
function Editor() {
  const loadAllBlocks = useAppStore((state) => state.loadAllBlocks);

  useEffect(() => {
    async function load() {
      try {
        await loadAllBlocks(fileId);
      } catch (error) {
        toast({
          title: 'åŠ è½½å¤±è´¥',
          description: error.message,
          variant: 'destructive',
        });
      }
    }
    load();
  }, [fileId]);
}
```

**Result ç±»å‹è¯´æ˜ï¼ˆä»…ä¾›ç†è§£åº•å±‚åŸç†ï¼‰ï¼š**

åç«¯æ‰€æœ‰å‘½ä»¤è¿”å› `Result<T, E>` ç±»å‹ï¼Œä½† TauriClient å·²ç»è‡ªåŠ¨å¤„ç†äº†ï¼š

```typescript
type Result<T, E> =
  | { status: 'ok'; data: T }      // æˆåŠŸ â†’ TauriClient è¿”å› data
  | { status: 'error'; error: E }  // å¤±è´¥ â†’ TauriClient æŠ›å‡ºå¼‚å¸¸
```

**ã€æ³¨æ„ã€‘ä½ ä¸éœ€è¦æ‰‹åŠ¨å¤„ç† Result ç±»å‹ï¼ŒTauriClient å·²ç»å¸®ä½ å¤„ç†äº†ï¼**

---

## å¼€å‘è§„èŒƒ

### 1. å‘½ä»¤æ‰§è¡Œæµç¨‹

Elfiee ä½¿ç”¨äº‹ä»¶æº¯æºæ¶æ„ï¼Œæ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½é€šè¿‡ **Command â†’ Event â†’ State** æµç¨‹ï¼š

```
ç»„ä»¶è°ƒç”¨ Action â†’ Action è°ƒç”¨ TauriClient â†’ åç«¯éªŒè¯æˆæƒ â†’ æ‰§è¡Œèƒ½åŠ›å¤„ç†å™¨
  â†’ ç”Ÿæˆäº‹ä»¶ â†’ æ›´æ–°çŠ¶æ€ â†’ è¿”å›äº‹ä»¶ â†’ Action æ›´æ–° Store â†’ ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
```

**ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª Markdown å—ï¼ˆåœ¨ Zustand Store ä¸­ï¼‰**

```typescript
// src/lib/app-store.ts
import { TauriClient } from '@/lib/tauri-client';

export const useAppStore = create<AppStore>((set, get) => ({
  blocks: new Map(),

  // Action: åˆ›å»ºå¹¶å†™å…¥ Markdown å—
  createMarkdownBlock: async (fileId: string, name: string, content: string) => {
    // 1. åˆ›å»ºå—ï¼ˆç”Ÿæˆ core.create äº‹ä»¶ï¼‰
    const events = await TauriClient.block.createBlock(fileId, name, 'markdown');
    const blockId = events[0].entity;

    // 2. å†™å…¥å†…å®¹ï¼ˆç”Ÿæˆ markdown.write äº‹ä»¶ï¼‰
    await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');

    // 3. é‡æ–°åŠ è½½æ‰€æœ‰å—ï¼ˆè‡ªåŠ¨è·å–æœ€æ–°çŠ¶æ€ï¼‰
    await get().loadAllBlocks(fileId);

    return blockId;
  },

  // Action: åŠ è½½æ‰€æœ‰å—
  loadAllBlocks: async (fileId: string) => {
    const blocks = await TauriClient.block.getAllBlocks(fileId);
    const blocksMap = new Map(blocks.map(b => [b.block_id, b]));
    set({ blocks: blocksMap });
  },
}));
```

**ç»„ä»¶ä¸­ä½¿ç”¨ï¼š**

```typescript
function Editor() {
  const blocks = useAppStore((state) => state.blocks);
  const createMarkdownBlock = useAppStore((state) => state.createMarkdownBlock);

  async function handleCreate() {
    try {
      const blockId = await createMarkdownBlock(
        fileId,
        'My Document',
        '# Hello World\nThis is my document.'
      );
      toast({ title: 'å—å·²åˆ›å»º', description: `ID: ${blockId}` });
    } catch (error) {
      toast({ title: 'åˆ›å»ºå¤±è´¥', description: error.message });
    }
  }

  // UI è‡ªåŠ¨æ˜¾ç¤ºæœ€æ–°æ•°æ®ï¼ˆä» Zustandï¼‰
  return <div>{/* ... */}</div>;
}
```

**ã€é‡è¦ã€‘çŠ¶æ€è‡ªåŠ¨åŒæ­¥**

ç”±äºä½¿ç”¨ Zustandï¼š
- âœ… Actions è‡ªåŠ¨æ›´æ–° Store åï¼Œç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“
- âœ… æ— éœ€æ‰‹åŠ¨ç¼“å­˜æˆ–åˆ·æ–°å—çŠ¶æ€
- âœ… æ‰€æœ‰ç»„ä»¶å…±äº«åŒä¸€ä»½æ•°æ®

### 2. ç±»å‹å®‰å…¨çš„ Payload æ„é€ 

æ¯ä¸ªèƒ½åŠ›éƒ½æœ‰å¯¹åº”çš„ Payload ç±»å‹ï¼ˆåœ¨ bindings.ts ä¸­è‡ªåŠ¨ç”Ÿæˆï¼‰ã€‚

**âœ… æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ç±»å‹å®šä¹‰çš„ Payload**

```typescript
import { commands, type CreateBlockPayload, type MarkdownWritePayload } from '@/bindings';

// åˆ›å»ºå—
const createPayload: CreateBlockPayload = {
  name: 'My Block',
  block_type: 'markdown',
  source: 'outline',
  metadata: {
    description: 'é¡¹ç›®éœ€æ±‚æ–‡æ¡£'
  }
};

// å†™å…¥ Markdown
const writePayload: MarkdownWritePayload = {
  content: '# Hello World'
};
```

**âŒ é”™è¯¯åšæ³•ï¼šä½¿ç”¨æœªå®šä¹‰çš„å­—æ®µ**

```typescript
// âŒ TypeScript ä¼šæŠ¥é”™ï¼š'invalid_field' ä¸å­˜åœ¨äº MarkdownWritePayload
const payload = {
  invalid_field: 'value',
  content: 'Hello'
};
```

### 3. ç¼–è¾‘å™¨ä¸Šä¸‹æ–‡

æ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½éœ€è¦ `editor_id` æ¥æ ‡è¯†æ“ä½œè€…ã€‚è¿™åœ¨ Zustand Actions ä¸­è‡ªåŠ¨å¤„ç†ï¼š

```typescript
// src/lib/app-store.ts
export const useAppStore = create<AppStore>((set) => ({
  activeEditorId: null,

  // åˆå§‹åŒ–æ—¶è·å–ç³»ç»Ÿç¼–è¾‘å™¨ ID
  initializeEditor: async () => {
    const systemEditorId = await TauriClient.file.getSystemEditorId();
    set({ activeEditorId: systemEditorId });
  },

  // Actions ä½¿ç”¨ activeEditorIdï¼ˆå¦‚æœ TauriClient éœ€è¦ï¼‰
  createBlock: async (fileId, name, type) => {
    // TauriClient å†…éƒ¨ä¼šè‡ªåŠ¨ä½¿ç”¨ active editor
    const events = await TauriClient.block.createBlock(fileId, name, type);
    return events[0].entity;
  },
}));
```

**ç»„ä»¶ä¸­ä½¿ç”¨ï¼š**

```typescript
function App() {
  const initializeEditor = useAppStore((state) => state.initializeEditor);

  useEffect(() => {
    initializeEditor(); // åº”ç”¨å¯åŠ¨æ—¶åˆå§‹åŒ–
  }, []);
}
```

### 4. æƒé™æ£€æŸ¥

æƒé™æ£€æŸ¥ä¹Ÿåº”è¯¥å°è£…åœ¨ Zustand Actions ä¸­ï¼š

```typescript
// src/lib/app-store.ts
export const useAppStore = create<AppStore>((set) => ({
  // Action: å†™å…¥å—ï¼ˆå¸¦æƒé™æ£€æŸ¥ï¼‰
  writeBlock: async (fileId, blockId, content) => {
    // 1. æ£€æŸ¥æƒé™
    const hasPermission = await TauriClient.block.checkPermission(
      fileId,
      blockId,
      'markdown.write'
    );

    if (!hasPermission) {
      throw new Error('No permission to write to this block');
    }

    // 2. æ‰§è¡Œå†™å…¥
    await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');

    // 3. æ›´æ–°çŠ¶æ€
    const updatedBlock = await TauriClient.block.getBlock(fileId, blockId);
    set((state) => {
      const newBlocks = new Map(state.blocks);
      newBlocks.set(blockId, updatedBlock);
      return { blocks: newBlocks };
    });
  },
}));
```

**ç»„ä»¶ä¸­ä½¿ç”¨ï¼ˆè‡ªåŠ¨å¤„ç†æƒé™ï¼‰ï¼š**

```typescript
function BlockEditor({ blockId }: Props) {
  const writeBlock = useAppStore((state) => state.writeBlock);

  async function handleSave(content: string) {
    try {
      await writeBlock(fileId, blockId, content);
      toast({ title: 'ä¿å­˜æˆåŠŸ' });
    } catch (error) {
      // æƒé™é”™è¯¯ä¼šè¢«è‡ªåŠ¨æ•è·
      toast({
        title: error.message.includes('permission') ? 'æƒé™ä¸è¶³' : 'ä¿å­˜å¤±è´¥',
        description: error.message,
        variant: 'destructive'
      });
    }
  }
}
```

---

## ç±»å‹å®‰å…¨

### 1. ä½¿ç”¨ç”Ÿæˆçš„ç±»å‹

**å§‹ç»ˆä» bindings.ts å¯¼å…¥ç±»å‹ï¼š**

```typescript
import {
  type Block,
  type Command,
  type Event,
  type Editor,
  type Grant,
  type FileMetadata,
  type CreateBlockPayload,
  type MarkdownWritePayload,
} from '@/bindings';
```

### 2. é¿å…ä½¿ç”¨ any

**âŒ é”™è¯¯åšæ³•ï¼š**

```typescript
const block: any = await commands.getBlock(fileId, blockId);
block.invalid_property = 'value'; // è¿è¡Œæ—¶é”™è¯¯
```

**âœ… æ­£ç¡®åšæ³•ï¼š**

```typescript
import { type Block } from '@/bindings';

const result = await commands.getBlock(fileId, blockId, null);
if (result.status === 'ok') {
  const block: Block = result.data;
  console.log(block.block_id);
  console.log(block.block_type);
  console.log(block.contents);
}
```

### 3. JsonValue å¤„ç†

Block çš„ `contents` å­—æ®µæ˜¯ `JsonValue` ç±»å‹ï¼Œéœ€è¦ç±»å‹æ–­è¨€ï¼š

```typescript
import { type Block } from '@/bindings';

const block: Block = ...;

// Markdown å—
if (block.block_type === 'markdown') {
  const markdown = (block.contents as { markdown?: string }).markdown || '';
}

// Code å—
if (block.block_type === 'code') {
  const code = (block.contents as { code?: string }).code || '';
  const language = (block.contents as { language?: string }).language || 'plaintext';
}

// Directory å—
if (block.block_type === 'directory') {
  const entries = (block.contents as { entries?: Record<string, any> }).entries || {};
}
```

---

## çŠ¶æ€ç®¡ç†

### 1. Zustand Storeï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰

**â­ Zustand æ˜¯å‰ç«¯çš„å•ä¸€æ•°æ®æºï¼Œæ‰€æœ‰ç»„ä»¶åªé€šè¿‡ Store æ“ä½œæ•°æ®ã€‚**

**Store ä½ç½®ï¼š** `src/lib/app-store.ts`

**å®Œæ•´ Store å®ç°ï¼š**

```typescript
// src/lib/app-store.ts
import { create } from 'zustand';
import { TauriClient } from '@/lib/tauri-client';
import type { Block, Editor, FileMetadata } from '@/bindings';

interface FileState {
  fileId: string;
  path: string;
  metadata: FileMetadata;
}

interface AppStore {
  // ============ State ============
  // æ–‡ä»¶çŠ¶æ€
  openFiles: Map<string, FileState>;
  activeFileId: string | null;

  // å—çŠ¶æ€ï¼ˆæŒ‰ fileId ç»„ç»‡ï¼‰
  blocks: Map<string, Block>; // blockId â†’ Block

  // ç¼–è¾‘å™¨çŠ¶æ€
  editors: Map<string, Editor>; // editorId â†’ Editor
  activeEditorId: string | null;

  // ============ File Actions ============
  openFile: (path: string) => Promise<string>;
  closeFile: (fileId: string) => Promise<void>;
  saveFile: (fileId: string) => Promise<void>;
  setActiveFile: (fileId: string) => void;

  // ============ Block Actions ============
  loadAllBlocks: (fileId: string) => Promise<void>;
  createBlock: (fileId: string, name: string, type: string) => Promise<string>;
  writeBlock: (fileId: string, blockId: string, content: string) => Promise<void>;
  deleteBlock: (fileId: string, blockId: string) => Promise<void>;
  linkBlocks: (fileId: string, parentId: string, childId: string, relationType: string) => Promise<void>;

  // ============ Editor Actions ============
  initializeEditor: () => Promise<void>;
  createEditor: (fileId: string, name: string, type: string) => Promise<string>;
}

export const useAppStore = create<AppStore>((set, get) => ({
  // ============ Initial State ============
  openFiles: new Map(),
  activeFileId: null,
  blocks: new Map(),
  editors: new Map(),
  activeEditorId: null,

  // ============ File Actions ============
  openFile: async (path) => {
    const fileId = await TauriClient.file.openFile(path);
    const metadata = await TauriClient.file.getFileMetadata(fileId);

    set((state) => {
      const newOpenFiles = new Map(state.openFiles);
      newOpenFiles.set(fileId, { fileId, path, metadata });
      return {
        openFiles: newOpenFiles,
        activeFileId: fileId,
      };
    });

    // è‡ªåŠ¨åŠ è½½è¯¥æ–‡ä»¶çš„æ‰€æœ‰å—
    await get().loadAllBlocks(fileId);

    return fileId;
  },

  closeFile: async (fileId) => {
    await TauriClient.file.closeFile(fileId);

    set((state) => {
      const newOpenFiles = new Map(state.openFiles);
      newOpenFiles.delete(fileId);

      // æ¸…ç†è¯¥æ–‡ä»¶çš„å—
      const newBlocks = new Map(state.blocks);
      Array.from(newBlocks.values())
        .filter(block => block.file_id === fileId)
        .forEach(block => newBlocks.delete(block.block_id));

      return {
        openFiles: newOpenFiles,
        blocks: newBlocks,
        activeFileId: state.activeFileId === fileId ? null : state.activeFileId,
      };
    });
  },

  saveFile: async (fileId) => {
    await TauriClient.file.saveFile(fileId);
  },

  setActiveFile: (fileId) => {
    set({ activeFileId: fileId });
  },

  // ============ Block Actions ============
  loadAllBlocks: async (fileId) => {
    const blocks = await TauriClient.block.getAllBlocks(fileId);

    set((state) => {
      const newBlocks = new Map(state.blocks);
      // æ·»åŠ æˆ–æ›´æ–°è¯¥æ–‡ä»¶çš„æ‰€æœ‰å—
      blocks.forEach(block => newBlocks.set(block.block_id, block));
      return { blocks: newBlocks };
    });
  },

  createBlock: async (fileId, name, type) => {
    const events = await TauriClient.block.createBlock(fileId, name, type);
    const blockId = events[0].entity;

    // é‡æ–°åŠ è½½æ‰€æœ‰å—ä»¥è·å–æœ€æ–°çŠ¶æ€
    await get().loadAllBlocks(fileId);

    return blockId;
  },

  writeBlock: async (fileId, blockId, content) => {
    await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');

    // æ›´æ–°è¯¥å—çš„çŠ¶æ€
    const updatedBlock = await TauriClient.block.getBlock(fileId, blockId);
    set((state) => {
      const newBlocks = new Map(state.blocks);
      newBlocks.set(blockId, updatedBlock);
      return { blocks: newBlocks };
    });
  },

  deleteBlock: async (fileId, blockId) => {
    await TauriClient.block.deleteBlock(fileId, blockId);

    set((state) => {
      const newBlocks = new Map(state.blocks);
      newBlocks.delete(blockId);
      return { blocks: newBlocks };
    });
  },

  linkBlocks: async (fileId, parentId, childId, relationType) => {
    await TauriClient.block.linkBlocks(fileId, parentId, childId, relationType);

    // é‡æ–°åŠ è½½çˆ¶å—ä»¥è·å–æ›´æ–°çš„ children
    const updatedParent = await TauriClient.block.getBlock(fileId, parentId);
    set((state) => {
      const newBlocks = new Map(state.blocks);
      newBlocks.set(parentId, updatedParent);
      return { blocks: newBlocks };
    });
  },

  // ============ Editor Actions ============
  initializeEditor: async () => {
    const systemEditorId = await TauriClient.file.getSystemEditorId();
    set({ activeEditorId: systemEditorId });
  },

  createEditor: async (fileId, name, type) => {
    const editor = await TauriClient.editor.createEditor(fileId, name, type);

    set((state) => {
      const newEditors = new Map(state.editors);
      newEditors.set(editor.editor_id, editor);
      return { editors: newEditors };
    });

    return editor.editor_id;
  },
}));
```

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Store

**âœ… è¯»å–çŠ¶æ€ï¼š**

```typescript
import { useAppStore } from '@/lib/app-store';

function DocumentView() {
  // è¯»å–çŠ¶æ€ï¼ˆç»„ä»¶ä¼šè‡ªåŠ¨è®¢é˜…è¿™äº›çŠ¶æ€ï¼‰
  const blocks = useAppStore((state) => state.blocks);
  const activeFileId = useAppStore((state) => state.activeFileId);

  // UI è‡ªåŠ¨å“åº”çŠ¶æ€å˜åŒ–
  return (
    <div>
      {Array.from(blocks.values())
        .filter(block => block.file_id === activeFileId)
        .map(block => (
          <BlockCard key={block.block_id} block={block} />
        ))}
    </div>
  );
}
```

**âœ… è°ƒç”¨ Actionsï¼š**

```typescript
function BlockEditor({ fileId, blockId }: Props) {
  // è·å–çŠ¶æ€
  const block = useAppStore((state) => state.blocks.get(blockId));

  // è·å– Actions
  const writeBlock = useAppStore((state) => state.writeBlock);
  const deleteBlock = useAppStore((state) => state.deleteBlock);

  async function handleSave(content: string) {
    try {
      await writeBlock(fileId, blockId, content);
      toast({ title: 'ä¿å­˜æˆåŠŸ' });
    } catch (error) {
      toast({ title: 'ä¿å­˜å¤±è´¥', description: error.message });
    }
  }

  async function handleDelete() {
    try {
      await deleteBlock(fileId, blockId);
      toast({ title: 'åˆ é™¤æˆåŠŸ' });
    } catch (error) {
      toast({ title: 'åˆ é™¤å¤±è´¥', description: error.message });
    }
  }

  return (
    <div>
      <Editor value={block?.contents.markdown} onSave={handleSave} />
      <Button onClick={handleDelete}>åˆ é™¤</Button>
    </div>
  );
}
```

### 3. æ€§èƒ½ä¼˜åŒ–ï¼šé€‰æ‹©æ€§è®¢é˜…

**é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼š**

```typescript
// âŒ é”™è¯¯ï¼šè®¢é˜…æ•´ä¸ª Storeï¼ˆä»»ä½•å˜åŒ–éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼‰
function MyComponent() {
  const store = useAppStore();
  return <div>{store.blocks.size}</div>;
}

// âœ… æ­£ç¡®ï¼šåªè®¢é˜…éœ€è¦çš„çŠ¶æ€
function MyComponent() {
  const blockCount = useAppStore((state) => state.blocks.size);
  return <div>{blockCount}</div>;
}

// âœ… æ›´å¥½ï¼šä½¿ç”¨ shallow æ¯”è¾ƒï¼ˆå¯¹è±¡/æ•°ç»„ï¼‰
import { shallow } from 'zustand/shallow';

function MyComponent() {
  const { blocks, editors } = useAppStore(
    (state) => ({ blocks: state.blocks, editors: state.editors }),
    shallow
  );
}
```

---

## é”™è¯¯å¤„ç†

### 1. åœ¨ Actions å’Œç»„ä»¶ä¸­å¤„ç†é”™è¯¯

**é”™è¯¯å¤„ç†ç­–ç•¥ï¼š**
1. **Zustand Actions**ï¼šæ•è· TauriClient é”™è¯¯ï¼Œå¯ä»¥è®°å½•æ—¥å¿—æˆ–é‡æ–°æŠ›å‡º
2. **React ç»„ä»¶**ï¼šæ•è· Action é”™è¯¯ï¼Œæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„æç¤º

**ç¤ºä¾‹ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†æµç¨‹**

```typescript
// src/lib/app-store.ts
export const useAppStore = create<AppStore>((set) => ({
  createBlock: async (fileId, name, type) => {
    try {
      const events = await TauriClient.block.createBlock(fileId, name, type);
      const blockId = events[0].entity;

      await get().loadAllBlocks(fileId);

      return blockId;
    } catch (error) {
      // è®°å½•é”™è¯¯æ—¥å¿—
      console.error('[Store] createBlock failed:', error);
      // é‡æ–°æŠ›å‡ºè®©ç»„ä»¶å¤„ç†
      throw error;
    }
  },
}));

// src/components/BlockCreator.tsx
function BlockCreator({ fileId }: Props) {
  const createBlock = useAppStore((state) => state.createBlock);

  async function handleCreate(name: string) {
    try {
      const blockId = await createBlock(fileId, name, 'markdown');

      toast({
        title: 'åˆ›å»ºæˆåŠŸ',
        description: `å— "${name}" å·²åˆ›å»º`,
      });

      return blockId;
    } catch (error) {
      toast({
        title: 'åˆ›å»ºå¤±è´¥',
        description: error.message,
        variant: 'destructive',
      });
    }
  }

  return <Button onClick={() => handleCreate('New Block')}>åˆ›å»ºå—</Button>;
}
```

### 2. ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

**ä½¿ç”¨ Shadcn Toast ç»„ä»¶ï¼š**

```typescript
import { toast } from '@/hooks/use-toast';

// æˆåŠŸæç¤º
toast({
  title: 'æ“ä½œæˆåŠŸ',
  description: 'æ–‡ä»¶å·²ä¿å­˜',
});

// é”™è¯¯æç¤º
toast({
  title: 'æ“ä½œå¤±è´¥',
  description: 'æ— æƒé™å†™å…¥æ­¤å—',
  variant: 'destructive',
});

// è­¦å‘Šæç¤º
toast({
  title: 'è­¦å‘Š',
  description: 'æ–‡ä»¶æœªä¿å­˜ï¼Œå°†ä¸¢å¤±æ‰€æœ‰æ›´æ”¹',
  variant: 'warning',
});
```

### 3. æƒé™é”™è¯¯å¤„ç†

```typescript
try {
  await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');
} catch (error) {
  if (error.message.includes('Permission denied')) {
    toast({
      title: 'æƒé™ä¸è¶³',
      description: 'æ‚¨æ²¡æœ‰æƒé™ç¼–è¾‘æ­¤å—',
      variant: 'destructive',
    });
  } else {
    toast({
      title: 'ä¿å­˜å¤±è´¥',
      description: error.message,
      variant: 'destructive',
    });
  }
}
```

---

## æµ‹è¯•è§„èŒƒ

### 1. ç»„ä»¶æµ‹è¯•

ä½¿ç”¨ Vitest + React Testing Libraryï¼š

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { BlockEditor } from './BlockEditor';

describe('BlockEditor', () => {
  it('renders block content', () => {
    const block = {
      block_id: '123',
      name: 'Test Block',
      block_type: 'markdown',
      contents: { markdown: '# Hello' },
      children: {},
      owner: 'alice',
      metadata: {},
    };

    render(<BlockEditor block={block} />);
    expect(screen.getByText('Test Block')).toBeInTheDocument();
  });
});
```

### 2. Mock Tauri Commands

åœ¨æµ‹è¯•ä¸­ Mock Tauri å‘½ä»¤ï¼š

```typescript
import { vi } from 'vitest';

// Mock commands
vi.mock('@/bindings', () => ({
  commands: {
    getAllBlocks: vi.fn().mockResolvedValue({
      status: 'ok',
      data: [
        {
          block_id: '123',
          name: 'Test Block',
          block_type: 'markdown',
          contents: { markdown: '# Hello' },
          children: {},
          owner: 'alice',
          metadata: {},
        },
      ],
    }),
  },
}));
```

---

## å¸¸è§é”™è¯¯ä¸é™·é˜±

### âŒ é”™è¯¯ 1ï¼šæ‰‹åŠ¨ç¼–è¾‘ bindings.ts
**åæœï¼š** ä¸‹æ¬¡ `pnpm tauri dev` æ—¶è¢«è¦†ç›–
**è§£å†³ï¼š** åœ¨åç«¯ Rust ä¸­å®šä¹‰ç±»å‹ + æ·»åŠ  `#[derive(Type)]` + åœ¨ lib.rs æ³¨å†Œ

### âŒ é”™è¯¯ 2ï¼šç»„ä»¶ç›´æ¥è°ƒç”¨ TauriClient
```typescript
// âŒ é”™è¯¯ï¼šç»•è¿‡ Zustand
import { TauriClient } from '@/lib/tauri-client';

function MyComponent() {
  const [block, setBlock] = useState(null);

  useEffect(() => {
    TauriClient.block.getBlock(fileId, blockId).then(setBlock);
  }, []);
}

// âœ… æ­£ç¡®ï¼šè°ƒç”¨ Zustand Action
function MyComponent() {
  const block = useAppStore((state) => state.blocks.get(blockId));
  const loadAllBlocks = useAppStore((state) => state.loadAllBlocks);

  useEffect(() => {
    loadAllBlocks(fileId);
  }, []);
}
```

**åæœ**ï¼š
- çŠ¶æ€ä¸ä¸€è‡´ï¼ˆå…¶ä»–ç»„ä»¶çœ‹ä¸åˆ°å˜åŒ–ï¼‰
- ä¸šåŠ¡é€»è¾‘é‡å¤
- éš¾ä»¥æµ‹è¯•å’Œç»´æŠ¤

### âŒ é”™è¯¯ 3ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡
```typescript
// âŒ é”™è¯¯ï¼šä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“
const block = useAppStore((state) => state.blocks.get(blockId));
block.contents.markdown = 'New content'; // ç›´æ¥ä¿®æ”¹

// âœ… æ­£ç¡®ï¼šè°ƒç”¨ Action
const writeBlock = useAppStore((state) => state.writeBlock);
await writeBlock(fileId, blockId, 'New content');
```

**åæœ**ï¼š
- ä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“
- ä¿®æ”¹ä¸ä¼šæŒä¹…åŒ–åˆ°åç«¯
- è¿å Zustand ä¸å¯å˜åŸåˆ™

### âŒ é”™è¯¯ 4ï¼šåœ¨ç»„ä»¶ä¸­æ··åˆä½¿ç”¨ TauriClient å’Œ Zustand
```typescript
// âŒ é”™è¯¯ï¼šè°ƒç”¨ TauriClient ä½†å¿˜è®°æ›´æ–° Store
async function handleSave(content: string) {
  await TauriClient.block.writeBlock(fileId, blockId, content, 'markdown');
  // å¿˜è®°æ›´æ–° Zustand Store
}

// âœ… æ­£ç¡®ï¼šåªè°ƒç”¨ Zustand Action
async function handleSave(content: string) {
  const writeBlock = useAppStore((state) => state.writeBlock);
  await writeBlock(fileId, blockId, content);
  // Action å†…éƒ¨ä¼šè‡ªåŠ¨æ›´æ–° Store
}
```

**åæœ**ï¼šStore ä¸­çš„æ•°æ®è¿‡æœŸï¼ŒUI æ˜¾ç¤ºæ—§æ•°æ®

### âŒ é”™è¯¯ 5ï¼šPayload ç±»å‹ä¸åŒ¹é…
```typescript
// âŒ é”™è¯¯ï¼šæ‰‹åŠ¨å®šä¹‰ Payload
const payload = { text: 'Hello' };  // å­—æ®µåé”™è¯¯

// âœ… æ­£ç¡®ï¼šä» bindings å¯¼å…¥ç±»å‹
import type { MarkdownWritePayload } from '@/bindings';
const payload: MarkdownWritePayload = { content: 'Hello' };
```

---

## æ€»ç»“

### å‰ç«¯å¼€å‘è€…å¿…é¡»éµå®ˆçš„è§„åˆ™

1. **ã€ä¸¥æ ¼ã€‘** ç»„ä»¶åªèƒ½é€šè¿‡ `Zustand Actions` æ“ä½œæ•°æ®ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ `TauriClient`
2. **ã€ä¸¥æ ¼ã€‘** `TauriClient` åªèƒ½åœ¨ `src/lib/app-store.ts` çš„ Actions å†…éƒ¨ä½¿ç”¨
3. **ã€ä¸¥æ ¼ã€‘** ä¸èƒ½æ‰‹åŠ¨ç¼–è¾‘ `src/bindings.ts`ï¼Œå®ƒç”± tauri-specta è‡ªåŠ¨ç”Ÿæˆ
4. **ã€ä¸¥æ ¼ã€‘** ä¸èƒ½ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¹è±¡ï¼Œå¿…é¡»é€šè¿‡ Actions ä¿®æ”¹
5. **ã€æ¨èã€‘** ä½¿ç”¨ TypeScript ç±»å‹ç³»ç»Ÿï¼Œé¿å… `any`
6. **ã€æ¨èã€‘** æ‰€æœ‰æ•°æ®æ“ä½œé€šè¿‡ Zustand Storeï¼Œå®ç°å•ä¸€æ•°æ®æº
7. **ã€æ¨èã€‘** é€‰æ‹©æ€§è®¢é˜…çŠ¶æ€ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
8. **ã€æ¨èã€‘** åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ try-catch æ•è· Action å¼‚å¸¸

### æ ¸å¿ƒå¼€å‘æµç¨‹

```
1. åœ¨ src/lib/app-store.ts ä¸­å®šä¹‰ Actions
   â†“
2. Actions å†…éƒ¨è°ƒç”¨ TauriClient
   â†“
3. TauriClient é€šè¿‡ Tauri IPC è°ƒç”¨åç«¯
   â†“
4. Actions æ¥æ”¶è¿”å›æ•°æ®ï¼Œæ›´æ–° Store çŠ¶æ€
   â†“
5. ç»„ä»¶é€šè¿‡ useAppStore è‡ªåŠ¨è·å–æœ€æ–°æ•°æ®
   â†“
6. UI è‡ªåŠ¨é‡æ–°æ¸²æŸ“
```

### æ•°æ®æµæ€»ç»“

```
ç»„ä»¶ â† åªè¯» â† Zustand State
  â†“
è°ƒç”¨ Actions
  â†“
Actions è°ƒç”¨ TauriClient â†’ Tauri IPC â†’ åç«¯
  â†‘
Actions æ›´æ–° State â† TauriClient è¿”å›æ•°æ® â†
```

**å…³é”®ç‚¹ï¼š**
- âœ… ç»„ä»¶æ°¸è¿œä¸ç›´æ¥è°ƒç”¨ TauriClient
- âœ… æ‰€æœ‰æ•°æ®æµéƒ½ç»è¿‡ Zustand Store
- âœ… Actions å°è£…æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
- âœ… ç»„ä»¶åªè´Ÿè´£ UI æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’

### éœ€è¦åç«¯æ”¯æŒæ—¶

å¦‚æœéœ€è¦æ–°åŠŸèƒ½ä½† bindings.ts ä¸­æ²¡æœ‰å¯¹åº”æ¥å£ï¼š
1. ä¸è¦å°è¯•åœ¨å‰ç«¯ç»•è¿‡é™åˆ¶
2. è”ç³»åç«¯å¼€å‘è€…æ·»åŠ æ–°çš„ Tauri command
3. ç­‰å¾… bindings.ts è‡ªåŠ¨æ›´æ–°
4. åœ¨ `app-store.ts` ä¸­æ·»åŠ ç›¸åº”çš„ Action
5. ç»„ä»¶è°ƒç”¨æ–°çš„ Action

---

## ğŸ è‡ªæŸ¥æ¸…å• (Checklist)

> åœ¨æäº¤ä»£ç å‰ï¼Œè¯·å¯¹ç…§ä»¥ä¸‹äº‹é¡¹è¿›è¡Œè‡ªæŸ¥ã€‚AI åŠ©æ‰‹å¿…é¡»ä¸¥æ ¼éµå®ˆã€‚

- [ ] **æ•°æ®æ“ä½œ**: ç»„ä»¶ä¸­æ˜¯å¦é€šè¿‡ `useAppStore` æ“ä½œæ•°æ®ï¼Ÿ(ç¦æ­¢ç›´æ¥è°ƒç”¨ `TauriClient`)
- [ ] **ç±»å‹å®‰å…¨**: æ˜¯å¦ä» `@/bindings` å¯¼å…¥äº† Payload å’Œ Entity ç±»å‹ï¼Ÿ(ç¦æ­¢æ‰‹åŠ¨å®šä¹‰ç›¸åŒç»“æ„)
- [ ] **çŠ¶æ€ä¿®æ”¹**: æ˜¯å¦é€šè¿‡ Store Actions è¿›è¡Œä¿®æ”¹ï¼Ÿ(ç¦æ­¢ `state.x = y` è¿™ç§ç›´æ¥èµ‹å€¼)
- [ ] **é”™è¯¯å¤„ç†**: æ‰€æœ‰çš„å¼‚æ­¥ UI æ“ä½œæ˜¯å¦éƒ½æœ‰ `try-catch` å¹¶é…åˆ `toast` æç¤ºï¼Ÿ
- [ ] **é™æ€èµ„æº**: é™æ€å›¾ç‰‡ç­‰æ˜¯å¦å­˜æ”¾åœ¨ `src/assets/` å¹¶ä½¿ç”¨ `import` å¼•å…¥ï¼Ÿ
- [ ] **æ ·å¼è§„èŒƒ**: æ˜¯å¦ä¼˜å…ˆä½¿ç”¨ Tailwind å®ç”¨ç±»å’Œ Shadcn UI ç»„ä»¶ï¼Ÿ

**æ›´å¤šè¯¦ç»†è§„åˆ™è¯·å‚è€ƒï¼š[AI_INDEX.md](./AI_INDEX.md)**

---

**ç›¸å…³æ–‡æ¡£ï¼š**
- [åç«¯å¼€å‘è§„èŒƒ](./åç«¯å¼€å‘è§„èŒƒ.md) - åç«¯å¼€å‘è¯¦ç»†æŒ‡å—
- [å¼€å‘æµç¨‹](./å¼€å‘æµç¨‹.md) - å®Œæ•´å¼€å‘æµç¨‹å’Œåä½œè§„èŒƒ
- [CLAUDE.md](../../CLAUDE.md) - é¡¹ç›®æ€»è§ˆå’Œ AI è¾…åŠ©å¼€å‘
- [FRONTEND_DEVELOPMENT.md](../../guides/FRONTEND_DEVELOPMENT.md) - Tauri Specta è¯¦ç»†æŒ‡å—
