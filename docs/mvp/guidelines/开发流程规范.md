# Elfiee å¼€å‘æµç¨‹è§„èŒƒ

> æœ¬æ–‡æ¡£è¯´æ˜å®Œæ•´çš„å¼€å‘æµç¨‹ã€ç¯å¢ƒæ­å»ºã€åä½œè§„èŒƒå’Œå¸¸è§ä»»åŠ¡æŒ‡å—ã€‚

## 1. ç¯å¢ƒå‡†å¤‡ (Setup)

### å¿…éœ€å·¥å…·
*   **Rust**: 1.70+ (`rustup`)
*   **Node.js**: 18+ (`pnpm`)
*   **Elfiee Generator**: 
    ```bash
    cargo install --path elfiee-ext-gen --force
    ```

### å¯åŠ¨å¼€å‘
```bash
pnpm install
pnpm tauri dev  # å‰åç«¯çƒ­é‡è½½ + è‡ªåŠ¨ç”Ÿæˆ bindings.ts
```

---

## 2. åŠŸèƒ½å¼€å‘å·¥ä½œæµ (Workflow)

### é˜¶æ®µä¸€ï¼šåç«¯ä¼˜å…ˆ (Backend First)
1.  **Scaffold**: ä½¿ç”¨ `elfiee-ext-gen create` ç”Ÿæˆæ‰©å±•éª¨æ¶ã€‚
    *   *Fallback*: å¦‚é‡ç‰¹æ®Šæƒ…å†µéœ€æ‰‹åŠ¨åˆ›å»ºï¼Œå¿…é¡»ä¸¥æ ¼æ¨¡ä»¿ç»“æ„å¹¶è¿è¡Œ `validate`ã€‚
2.  **TDD**: è¿è¡Œ `cargo test` ç¡®è®¤æµ‹è¯•å¤±è´¥ (Red)ã€‚
3.  **Implement**:
    *   å®šä¹‰ Payload (`mod.rs`).
    *   å®ç° Handler (`*_handler.rs`).
    *   é€šè¿‡ Tests (`tests.rs`) (Green).
4.  **Register**: ç¡®ä¿ Command åœ¨ `lib.rs` ä¸­åŒé‡æ³¨å†Œã€‚
5.  **Sync**: è¿è¡Œ `pnpm tauri dev` æ›´æ–° `bindings.ts`ã€‚

### é˜¶æ®µäºŒï¼šå‰ç«¯è·Ÿè¿› (Frontend Follow-up)
1.  **Store Action**: åœ¨ `src/lib/app-store.ts` ä¸­æ·»åŠ  Actionã€‚
2.  **UI Component**: åˆ›å»ºæˆ–æ›´æ–°ç»„ä»¶ï¼Œè°ƒç”¨ Store Actionã€‚
3.  **Verify**: åœ¨ UI ä¸­æµ‹è¯•åŠŸèƒ½ã€‚

---

## 3. æäº¤è§„èŒƒ (Git & Commit)

*   **åˆ†æ”¯**: ä½¿ç”¨ `feat/xxx` æˆ– `fix/xxx`ã€‚ç¦æ­¢ç›´æ¨ `main`ã€‚
*   **æ ¼å¼**: æäº¤å‰è¿è¡Œ `make fmt` (Rust & TS æ ¼å¼åŒ–).
*   **Commit Message**: éµå¾ª Conventional Commits (e.g., `feat(editor): add image block`).

---

## ğŸ æµç¨‹è‡ªæŸ¥æ¸…å• (Checklist)

> åœ¨å®Œæˆä»»åŠ¡å‰ï¼Œè¯·å¯¹ç…§ä»¥ä¸‹äº‹é¡¹è¿›è¡Œè‡ªæŸ¥ã€‚

| é˜¶æ®µ | æ£€æŸ¥é¡¹ | éªŒè¯å‘½ä»¤ |
|:---|:---|:---|
| **Start** | å·¥å…·æ˜¯å¦æœ€æ–°ï¼Ÿ | `cargo install --path elfiee-ext-gen` |
| **Dev** | æ˜¯å¦é€šè¿‡äº† TDD æµ‹è¯•ï¼Ÿ | `cargo test my_ext::tests` |
| **Review** | ç»“æ„æ˜¯å¦åˆæ³•ï¼Ÿ | `elfiee-ext-gen validate <ext>` |
| **Type** | å‰ç«¯ç±»å‹æ˜¯å¦åŒæ­¥ï¼Ÿ | `pnpm tauri dev` (æ£€æŸ¥ bindings.ts) |
| **Code** | ä»£ç æ˜¯å¦æ ¼å¼åŒ–ï¼Ÿ | `make fmt` |
